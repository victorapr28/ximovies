(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{Eh8b:function(e,t,n){"use strict";n.r(t),n.d(t,"AppAppearanceModule",(function(){return ut}));var i=n("ofXK"),a=n("3Pt+"),o=n("tyNb"),c=n("xBj9"),s=n("WAq7"),r=n("+rOU"),l=n("lJxs"),b=n("OnlV"),d=n("fXoL"),u=n("XhcP"),m=n("NFeN"),p=n("Rd8u"),h=n("bTqV"),g=n("k9D4"),f=n("a6zP"),v=n("+1cI");const y=function(){return["General"]};let P=(()=>{class e{constructor(e,t){this.fb=e,this.editor=t,this.form=this.fb.group({"branding.logo_light":[""],"branding.logo_dark":[""],"branding.favicon":[""],"env.APP_NAME":[""],"branding.site_description":[""]})}ngOnInit(){const e={};Object.keys(this.form.controls).forEach(t=>{e[t]=this.editor.currentValue(t)}),this.form.patchValue(e),this.form.valueChanges.subscribe(e=>{this.editor.addChanges(e)})}defaultValue(e){return this.editor.defaultSettings[e]}}return e.\u0275fac=function(t){return new(t||e)(d.Tb(a.g),d.Tb(c.a))},e.\u0275cmp=d.Nb({type:e,selectors:[["general-appearance-panel"]],hostAttrs:[1,"appearance-panel"],decls:16,vars:8,consts:[[3,"path","back"],[1,"appearance-panel-content","many-inputs",3,"formGroup"],["formControlName","branding.logo_light","diskPrefix","branding_media","highlightInPreview",".logo",3,"defaultValue"],["formControlName","branding.logo_dark","diskPrefix","branding_media","highlightInPreview",".logo",3,"defaultValue"],["backendUri","uploads/favicon","diskPrefix","branding_media","formControlName","branding.favicon",3,"defaultValue"],[1,"input-container"],["for","env.APP_NAME","trans",""],["type","text","id","env.APP_NAME","formControlName","env.APP_NAME",3,"placeholder"],["for","branding.site_description","trans",""],["id","branding.site_description","rows","4","formControlName","branding.site_description",3,"placeholder"]],template:function(e,t){1&e&&(d.Zb(0,"appearance-panel-meta",0),d.hc("back",(function(){return t.editor.closeActivePanel()})),d.Yb(),d.Zb(1,"div",1),d.Zb(2,"appearance-image-input",2),d.Pc(3," Logo #1 (For top navbar) "),d.Yb(),d.Zb(4,"appearance-image-input",3),d.Pc(5," Logo #2 (Everywhere else) "),d.Yb(),d.Zb(6,"appearance-image-input",4),d.Pc(7," Favicon "),d.Yb(),d.Zb(8,"div",5),d.Zb(9,"label",6),d.Pc(10,"Site Name"),d.Yb(),d.Ub(11,"input",7),d.Yb(),d.Zb(12,"div",5),d.Zb(13,"label",8),d.Pc(14,"Site Description"),d.Yb(),d.Ub(15,"textarea",9),d.Yb(),d.Yb()),2&e&&(d.tc("path",d.wc(7,y)),d.Fb(1),d.tc("formGroup",t.form),d.Fb(1),d.tc("defaultValue",t.defaultValue("branding.logo_light")),d.Fb(2),d.tc("defaultValue",t.defaultValue("branding.logo_dark")),d.Fb(2),d.tc("defaultValue",t.defaultValue("branding.favicon")),d.Fb(5),d.tc("placeholder",t.defaultValue("env.APP_NAME")),d.Fb(4),d.tc("placeholder",t.defaultValue("branding.site_description")))},directives:[g.a,a.u,a.l,f.a,a.t,a.j,v.a,p.a,a.c],styles:[""],changeDetection:0}),e})();var C=n("QGXG"),M=n("2Vo4"),x=n("0IaG"),k=n("i2dy"),Y=n("LRXf");let Z=(()=>{class e{constructor(e){this.http=e}all(){return this.http.get("css-theme")}create(e){return this.http.post("css-theme",e)}update(e,t){return this.http.put("css-theme/"+e,t)}delete(e){return this.http.delete("css-theme/"+e)}}return e.\u0275fac=function(t){return new(t||e)(d.dc(Y.a))},e.\u0275prov=d.Pb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var O=n("pLZG"),w=n("1jcm");function I(e,t){1&e&&(d.Zb(0,"span",6),d.Pc(1,"Update Theme"),d.Yb())}function F(e,t){1&e&&(d.Zb(0,"span",6),d.Pc(1,"Create Theme"),d.Yb())}function _(e,t){if(1&e&&(d.Zb(0,"div",21),d.Pc(1),d.Yb()),2&e){const e=d.lc().ngIf;d.Fb(1),d.Qc(e.name)}}function $(e,t){1&e&&(d.Zb(0,"span"),d.Pc(1,"Update"),d.Yb())}function T(e,t){1&e&&(d.Zb(0,"span"),d.Pc(1,"Create"),d.Yb())}function N(e,t){if(1&e){const e=d.ac();d.Zb(0,"form",7),d.hc("ngSubmit",(function(){return d.Ec(e),d.lc().confirm()})),d.Zb(1,"mat-dialog-content",8),d.Zb(2,"div",9),d.Zb(3,"label",10),d.Pc(4,"Name"),d.Yb(),d.Ub(5,"input",11),d.Nc(6,_,2,1,"div",12),d.Yb(),d.Zb(7,"div",13),d.Zb(8,"mat-slide-toggle",14),d.Pc(9,"Dark Theme"),d.Yb(),d.Zb(10,"p",6),d.Pc(11,"Whether this theme has light text on dark background."),d.Yb(),d.Yb(),d.Zb(12,"div",13),d.Zb(13,"mat-slide-toggle",15),d.Pc(14,"Default Dark Theme"),d.Yb(),d.Zb(15,"p",6),d.Pc(16,"Whether this theme should be used as default dark theme."),d.Yb(),d.Yb(),d.Zb(17,"div",13),d.Zb(18,"mat-slide-toggle",16),d.Pc(19,"Default Light Theme"),d.Yb(),d.Zb(20,"p",6),d.Pc(21,"Whether this theme should be used as default light theme."),d.Yb(),d.Yb(),d.Yb(),d.Zb(22,"mat-dialog-actions"),d.Zb(23,"button",17),d.hc("click",(function(){return d.Ec(e),d.lc().close()})),d.Pc(24,"Cancel"),d.Yb(),d.Zb(25,"button",18),d.mc(26,"async"),d.Nc(27,$,2,0,"span",19),d.Nc(28,T,2,0,"ng-template",null,20,d.Oc),d.Yb(),d.Yb(),d.Yb()}if(2&e){const e=t.ngIf,n=d.Bc(29),i=d.lc();d.tc("formGroup",i.form),d.Fb(6),d.tc("ngIf",e.name),d.Fb(19),d.tc("disabled",d.nc(26,5,i.loading$)),d.Fb(2),d.tc("ngIf",i.data.theme)("ngIfElse",n)}}let E=(()=>{class e{constructor(e,t,n,i,a){this.dialogRef=e,this.data=t,this.cssTheme=n,this.toast=i,this.fb=a,this.loading$=new M.a(!1),this.errors$=new M.a({}),this.form=this.fb.group({name:[""],is_dark:[!1],default_dark:[!1],default_light:[!1]}),t.theme&&this.form.patchValue(t.theme),this.form.get("default_dark").valueChanges.pipe(Object(O.a)(e=>!!e)).subscribe(()=>{this.form.get("default_light").setValue(!1)}),this.form.get("default_light").valueChanges.pipe(Object(O.a)(e=>!!e)).subscribe(()=>{this.form.get("default_dark").setValue(!1)})}confirm(){(this.data.theme?this.cssTheme.update(this.data.theme.id,this.form.value):this.cssTheme.create(this.form.value)).subscribe(e=>{this.toast.open(this.data.theme?"Theme updated":"Theme created"),this.close(e.theme)},e=>this.errors$.next(e.messages))}close(e){this.dialogRef.close(e)}}return e.\u0275fac=function(t){return new(t||e)(d.Tb(x.h),d.Tb(x.a),d.Tb(Z),d.Tb(k.a),d.Tb(a.g))},e.\u0275cmp=d.Nb({type:e,selectors:[["crupdate-css-theme-modal"]],decls:8,vars:5,consts:[[1,"modal-header"],["mat-dialog-title",""],["trans","",4,"ngIf"],["type","button","tabindex","-1",1,"close-button","no-style",3,"click"],["svgIcon","close"],["ngNativeValidate","",3,"formGroup","ngSubmit",4,"ngIf"],["trans",""],["ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"many-inputs"],[1,"input-container"],["for","name","trans",""],["type","text","id","name","formControlName","name","required","","minlength","3"],["class","error",4,"ngIf"],[1,"setting-toggle-container"],["id","is_dark","formControlName","is_dark","trans",""],["id","default_dark","formControlName","default_dark","trans",""],["id","default_light","formControlName","default_light","trans",""],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],[4,"ngIf","ngIfElse"],["creating",""],[1,"error"]],template:function(e,t){1&e&&(d.Zb(0,"div",0),d.Zb(1,"h2",1),d.Nc(2,I,2,0,"span",2),d.Nc(3,F,2,0,"span",2),d.Yb(),d.Zb(4,"button",3),d.hc("click",(function(){return t.close()})),d.Ub(5,"mat-icon",4),d.Yb(),d.Yb(),d.Nc(6,N,30,7,"form",5),d.mc(7,"async")),2&e&&(d.Fb(2),d.tc("ngIf",t.data.theme),d.Fb(1),d.tc("ngIf",!t.data.theme),d.Fb(3),d.tc("ngIf",d.nc(7,3,t.errors$)))},directives:[x.i,i.t,m.a,p.a,a.u,a.l,x.f,a.c,a.t,a.j,a.E,a.p,w.a,x.c,h.b],pipes:[i.b],styles:["[_nghost-%COMP%]{display:block;width:400px;max-width:100%}"],changeDetection:0}),e})();var S=n("nYR2"),D=n("/RwR"),A=n("FBzJ"),V=n("uSwg"),U=n("v4Vz");function L(e,t){if(1&e&&(d.Zb(0,"li"),d.Zb(1,"color-picker-input",2),d.Pc(2),d.Yb(),d.Yb()),2&e){const e=t.$implicit,n=d.lc();d.Fb(1),d.tc("formControlName",e.key),d.Fb(1),d.Qc(n.viewName(e.key))}}let j=(()=>{class e{constructor(e,t){this.editor=e,this.themes=t,this.form=new a.k({}),this.colorCache={}}ngOnInit(){this.editor.setSaveRequest(this.saveColors.bind(this)),Object.entries(this.theme.colors).forEach(([e,t])=>{this.form.addControl(e,new a.h(t))}),this.editor.initiated$.subscribe(()=>{this.setColors(this.theme.colors),this.form.valueChanges.subscribe(e=>{this.setColors(e),this.editor.addChanges({colors:e})})})}ngOnDestroy(){this.editor.setSaveRequest(null)}saveColors(e){return this.themes.update(this.theme.id,e)}setColors(e){Object.entries(e).forEach(([e,t])=>{this.colorCache[e]!==t&&(this.editor.postMessage(new V.d(e,t)),this.colorCache[e]=t)})}viewName(e){return e.replace("be-","").replace(/-/g," ")}}return e.\u0275fac=function(t){return new(t||e)(d.Tb(c.a),d.Tb(Z))},e.\u0275cmp=d.Nb({type:e,selectors:[["css-theme-colors-panel"]],inputs:{theme:"theme"},decls:3,vars:4,consts:[[3,"formGroup"],[4,"ngFor","ngForOf"],["trans","",3,"formControlName"]],template:function(e,t){1&e&&(d.Zb(0,"ul",0),d.Nc(1,L,3,2,"li",1),d.mc(2,"keyvalue"),d.Yb()),2&e&&(d.tc("formGroup",t.form),d.Fb(1),d.tc("ngForOf",d.nc(2,2,t.theme.colors)))},directives:[a.u,a.l,i.s,U.a,p.a,a.t,a.j],pipes:[i.l],styles:[""],changeDetection:0}),e})();function R(e,t){1&e&&d.Ub(0,"css-theme-colors-panel",5),2&e&&d.tc("theme",t.ngIf)}function Q(e,t){if(1&e){const e=d.ac();d.Zb(0,"li",8),d.hc("click",(function(){d.Ec(e);const n=t.$implicit;return d.lc(2).setSelectedTheme(n)})),d.Zb(1,"div",9),d.Pc(2),d.Yb(),d.Zb(3,"div",10),d.hc("click",(function(t){return d.Ec(e),t.stopPropagation()})),d.Zb(4,"button",11),d.hc("click",(function(){d.Ec(e);const n=t.$implicit;return d.lc(2).setSelectedTheme(n)})),d.Ub(5,"mat-icon",12),d.Yb(),d.Zb(6,"button",11),d.hc("click",(function(){d.Ec(e);const n=t.$implicit;return d.lc(2).openCrupdateThemeModal(n)})),d.Ub(7,"mat-icon",13),d.Yb(),d.Zb(8,"button",11),d.hc("click",(function(){d.Ec(e);const n=t.$implicit;return d.lc(2).maybeDeleteThemeModal(n)})),d.Ub(9,"mat-icon",14),d.Yb(),d.Yb(),d.Yb()}if(2&e){const e=t.$implicit;d.Fb(2),d.Qc(e.name)}}function z(e,t){if(1&e){const e=d.ac();d.Zb(0,"button",6),d.hc("click",(function(){return d.Ec(e),d.lc().openCrupdateThemeModal()})),d.Pc(1,"New Theme"),d.Yb(),d.Zb(2,"ul"),d.Nc(3,Q,10,1,"li",7),d.mc(4,"async"),d.Yb()}if(2&e){const e=d.lc();d.Fb(3),d.tc("ngForOf",d.nc(4,1,e.loadedThemes$))}}let G=(()=>{class e{constructor(e,t,n,i,a,o){this.appearance=e,this.modal=t,this.themes=n,this.toast=i,this.router=a,this.route=o,this.loading$=new M.a(!1),this.loadedThemes$=new M.a([]),this.selectedTheme$=new M.a(null),this.path$=this.selectedTheme$.pipe(Object(l.a)(e=>{const t=["Themes"];return e&&t.push(e.name),t}))}ngOnInit(){this.reloadThemes()}ngOnDestroy(){this.querySub&&this.querySub.unsubscribe()}openCrupdateThemeModal(e){this.modal.open(E,{theme:e}).afterClosed().subscribe(e=>{e&&this.reloadThemes()})}setSelectedTheme(e){this.router.navigate([],{queryParams:{theme:e&&e.id},queryParamsHandling:"merge"})}openPreviousPanel(){this.selectedTheme$.value?this.setSelectedTheme():this.appearance.closeActivePanel()}maybeDeleteThemeModal(e){this.modal.show(D.a,{title:"Delete Theme",body:"Are you sure you want to delete this theme?",ok:"Delete"}).afterClosed().subscribe(t=>{t&&this.deleteTheme(e)})}reloadThemes(){this.loading$.next(!0),this.themes.all().pipe(Object(S.a)(()=>this.loading$.next(!1))).subscribe(e=>{this.loadedThemes$.next(e.pagination.data),this.bindToQueryParams()})}deleteTheme(e){this.themes.delete([e.id]).subscribe(()=>{this.toast.open("Theme deleted"),this.reloadThemes()})}bindToQueryParams(){this.querySub||(this.querySub=this.route.queryParams.subscribe(e=>{const t=this.loadedThemes$.value.find(t=>t.id===+e.theme);this.selectedTheme$.next(t)}))}}return e.\u0275fac=function(t){return new(t||e)(d.Tb(c.a),d.Tb(C.a),d.Tb(Z),d.Tb(k.a),d.Tb(o.e),d.Tb(o.a))},e.\u0275cmp=d.Nb({type:e,selectors:[["themes-appearance-panel"]],decls:9,vars:10,consts:[[3,"path","back"],[1,"appearance-panel-content"],[3,"theme",4,"ngIf","ngIfElse"],["themesList",""],[1,"overlay","overlay-partial",3,"isVisible"],[3,"theme"],["mat-raised-button","","color","accent","type","button","trans","",1,"new-theme-button",3,"click"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[1,"nav-item",3,"click"],[1,"name"],[1,"actions",3,"click"],["mat-icon-button","","type","button",3,"click"],["svgIcon","drop-custom"],["svgIcon","edit"],["svgIcon","delete"]],template:function(e,t){if(1&e&&(d.Zb(0,"appearance-panel-meta",0),d.hc("back",(function(){return t.openPreviousPanel()})),d.mc(1,"async"),d.Yb(),d.Zb(2,"div",1),d.Nc(3,R,1,1,"css-theme-colors-panel",2),d.mc(4,"async"),d.Nc(5,z,5,3,"ng-template",null,3,d.Oc),d.Yb(),d.Ub(7,"loading-indicator",4),d.mc(8,"async")),2&e){const e=d.Bc(6);d.tc("path",d.nc(1,4,t.path$)),d.Fb(3),d.tc("ngIf",d.nc(4,6,t.selectedTheme$))("ngIfElse",e),d.Fb(4),d.tc("isVisible",d.nc(8,8,t.loading$))}},directives:[g.a,i.t,A.a,j,h.b,p.a,i.s,m.a],pipes:[i.b],styles:[".new-theme-button[_ngcontent-%COMP%]{margin-bottom:15px}"],changeDetection:0}),e})();var q=n("5+WD"),W=n("f9yG"),B=n("kmQS");class X{constructor(e={}){this.type="link",this.order=1,this.condition=null,this.target=null,this.position=0,this.activeExact=!1;for(const t in e)this[t]=e[t];this.id=Math.floor(999*Math.random())}}let H=(()=>{class e{constructor(e,t){this.settings=e,this.appearance=t,this.allMenus$=new M.a([]),this.activeMenu$=new M.a(null)}create(){const e=[...this.allMenus$.value];this.activeMenu$.next(new W.a({name:"New Menu"})),e.push(this.activeMenu$.value),this.allMenus$.next(e),this.commitChanges()}reorderActiveMenuItems(e,t){const n=Object.assign({},this.activeMenu$.value);Object(q.g)(n.items,e,t),this.activeMenu$.next(n),this.commitChanges()}deleteActive(){const e=[...this.allMenus$.value],t=e.indexOf(this.activeMenu$.value);e.splice(t,1),this.activeMenu$.next(null),this.allMenus$.next(e),this.commitChanges()}addItem(e){const t=Object.assign({},this.activeMenu$.value);e=this.transformLocalLinksToRoutes(e),t.items.push(e),this.activeMenu$.next(t),this.commitChanges()}removeItem(e){const t=Object.assign({},this.activeMenu$.value),n=this.activeMenu$.value.items.indexOf(e);t.items.splice(n,1),this.activeMenu$.next(t),this.commitChanges()}transformLocalLinksToRoutes(e){const t=this.settings.getBaseUrl();return"link"!==e.type||-1===e.action.indexOf(t)||(e.type="route",e.action=e.action.replace(this.settings.getBaseUrl(),"")),e}commitChanges(){const e=JSON.stringify(this.allMenus$.value);this.appearance.setConfig("menus",e),this.appearance.addChanges({menus:e})}setFromJson(e){if(!e)return;const t=JSON.parse(e);if(!t)return;const n=t.map(e=>{const t=new W.a(e);return t.items=t.items.map(e=>new X(e)),t});this.allMenus$.next(n)}}return e.\u0275fac=function(t){return new(t||e)(d.dc(B.a),d.dc(c.a))},e.\u0275prov=d.Pb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var J=n("dz5c"),K=n("WvtK"),ee=n("ZfYz"),te=n("sPnx");let ne=(()=>{class e{constructor(e){this.http=e}get(){return this.http.getWithCache("admin/appearance/menu-categories")}}return e.\u0275fac=function(t){return new(t||e)(d.dc(te.a))},e.\u0275prov=d.Pb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ie=n("7EHt");function ae(e,t){if(1&e){const e=d.ac();d.Zb(0,"div",17),d.hc("click",(function(){d.Ec(e);const n=t.$implicit;return d.lc().addRouteMenuItem(n)})),d.Pc(1),d.Yb()}if(2&e){const e=t.$implicit;d.Fb(1),d.Rc("",e," ")}}function oe(e,t){if(1&e){const e=d.ac();d.Zb(0,"div",17),d.hc("click",(function(){d.Ec(e);const n=t.$implicit;return d.lc(2).addCustomMenuItem(n)})),d.Pc(1),d.Yb()}if(2&e){const e=t.$implicit;d.Fb(1),d.Qc(e.label)}}function ce(e,t){if(1&e&&(d.Zb(0,"mat-expansion-panel",5),d.Zb(1,"mat-expansion-panel-header"),d.Zb(2,"mat-panel-title",6),d.Pc(3),d.Yb(),d.Yb(),d.Zb(4,"div",14),d.Nc(5,oe,2,1,"div",15),d.Yb(),d.Yb()),2&e){const e=t.$implicit;d.Fb(3),d.Qc(e.name),d.Fb(2),d.tc("ngForOf",e.items)}}let se=(()=>{class e{constructor(e,t,n,i,a){this.editor=e,this.appearance=t,this.overlayPanelRef=n,this.fb=i,this.itemCategories=a,this.linkForm=this.fb.group({action:[""],label:[""]})}ngOnInit(){this.itemCategories.get().subscribe(e=>{this.menuItemCategories=e.categories})}addLinkMenuItem(){this.editor.addItem(new X({type:"link",label:this.linkForm.value.label,action:this.linkForm.value.action})),this.linkForm.reset(),this.close()}addRouteMenuItem(e){this.editor.addItem(new X({type:"route",label:e,action:e})),this.close()}addCustomMenuItem(e){this.editor.addItem(new X(e)),this.close()}close(){this.overlayPanelRef.close()}}return e.\u0275fac=function(t){return new(t||e)(d.Tb(H),d.Tb(c.a),d.Tb(ee.a),d.Tb(a.g),d.Tb(ne))},e.\u0275cmp=d.Nb({type:e,selectors:[["add-menu-item-panel"]],decls:30,vars:3,consts:[[1,"header"],["trans","",1,"title"],["svgIcon","close",3,"click"],[1,"new-item-tabs"],["ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"mat-elevation-z"],["trans",""],[1,"many-inputs","expansion-panel-content"],[1,"input-container"],["for","external-link-url","trans",""],["type","url","id","external-link-url","formControlName","action","required",""],["for","external-link-text","trans",""],["type","text","id","external-link-text","formControlName","label","required",""],["mat-button","","color","accent","type","submit","trans",""],[1,"items-list","expansion-panel-content"],["class","item",3,"click",4,"ngFor","ngForOf"],["class","mat-elevation-z",4,"ngFor","ngForOf"],[1,"item",3,"click"]],template:function(e,t){1&e&&(d.Zb(0,"div",0),d.Zb(1,"span",1),d.Pc(2,"New Menu Item"),d.Yb(),d.Zb(3,"mat-icon",2),d.hc("click",(function(){return t.close()})),d.Yb(),d.Yb(),d.Zb(4,"div",3),d.Zb(5,"mat-accordion"),d.Zb(6,"form",4),d.hc("ngSubmit",(function(){return t.addLinkMenuItem()})),d.Zb(7,"mat-expansion-panel",5),d.Zb(8,"mat-expansion-panel-header"),d.Zb(9,"mat-panel-title",6),d.Pc(10,"Link"),d.Yb(),d.Yb(),d.Zb(11,"div",7),d.Zb(12,"div",8),d.Zb(13,"label",9),d.Pc(14,"URL"),d.Yb(),d.Ub(15,"input",10),d.Yb(),d.Zb(16,"div",8),d.Zb(17,"label",11),d.Pc(18,"Link Text"),d.Yb(),d.Ub(19,"input",12),d.Yb(),d.Yb(),d.Zb(20,"mat-action-row"),d.Zb(21,"button",13),d.Pc(22,"Add"),d.Yb(),d.Yb(),d.Yb(),d.Yb(),d.Zb(23,"mat-expansion-panel",5),d.Zb(24,"mat-expansion-panel-header"),d.Zb(25,"mat-panel-title",6),d.Pc(26,"Route"),d.Yb(),d.Yb(),d.Zb(27,"div",14),d.Nc(28,ae,2,1,"div",15),d.Yb(),d.Yb(),d.Nc(29,ce,6,2,"mat-expansion-panel",16),d.Yb(),d.Yb()),2&e&&(d.Fb(6),d.tc("formGroup",t.linkForm),d.Fb(22),d.tc("ngForOf",t.appearance.config.menus.availableRoutes),d.Fb(1),d.tc("ngForOf",t.menuItemCategories))},directives:[p.a,m.a,ie.a,a.u,a.l,ie.c,ie.f,ie.g,a.c,a.t,a.j,a.E,ie.d,h.b,i.s],styles:["[_nghost-%COMP%]{background-color:var(--be-background-alternative);box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);overflow:hidden;width:300px;border-radius:4px}.header[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:var(--be-background);padding:15px;font-size:1.7rem;font-weight:300;border-bottom:1px solid var(--be-divider-default);margin-bottom:10px}.header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:var(--be-secondary-text);margin-left:auto}.new-item-tabs[_ngcontent-%COMP%]{padding:10px}.items-list[_ngcontent-%COMP%]{overflow:auto;max-height:300px}.items-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{color:var(--be-link);padding-bottom:8px;margin-bottom:8px;border-bottom:1px solid var(--be-divider-default);cursor:pointer}.items-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:hover{text-decoration:underline}.mat-expansion-panel[_ngcontent-%COMP%]{border:1px solid var(--be-divider-default);margin-bottom:10px}.mat-expansion-panel-header[_ngcontent-%COMP%]{min-height:57px}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{border-bottom:1px solid var(--be-divider-default)}.expansion-panel-content[_ngcontent-%COMP%]{padding-top:25px}"],changeDetection:0}),e})();function re(e,t){if(1&e){const e=d.ac();d.Zb(0,"button",2),d.hc("click",(function(){d.Ec(e);const n=t.$implicit;return d.lc().selectIcon(n)})),d.Ub(1,"mat-icon",3),d.Yb()}if(2&e){const e=t.$implicit;d.Fb(1),d.tc("svgIcon",e)}}let le=(()=>{class e{constructor(e,t){this.http=e,this.overlayPanelRef=t,this.icons$=new M.a([]),this.loading$=new M.a(!1),this.iconSelected=new d.p}ngOnInit(){this.loading$.next(!0),this.http.get("admin/icons").pipe(Object(S.a)(()=>this.loading$.next(!1))).subscribe(e=>{this.icons$.next(e.icons)})}selectIcon(e){this.iconSelected.observers.length?this.iconSelected.next(e):(this.overlayPanelRef.emitValue(e),this.overlayPanelRef.close())}}return e.\u0275fac=function(t){return new(t||e)(d.Tb(te.a),d.Tb(ee.a))},e.\u0275cmp=d.Nb({type:e,selectors:[["icon-selector"]],outputs:{iconSelected:"iconSelected"},decls:4,vars:6,consts:[["mat-icon-button","",3,"click",4,"ngFor","ngForOf"],[1,"overlay","overlay-partial",3,"isVisible"],["mat-icon-button","",3,"click"],[3,"svgIcon"]],template:function(e,t){1&e&&(d.Nc(0,re,2,1,"button",0),d.mc(1,"async"),d.Ub(2,"loading-indicator",1),d.mc(3,"async")),2&e&&(d.tc("ngForOf",d.nc(1,2,t.icons$)),d.Fb(2),d.tc("isVisible",d.nc(3,4,t.loading$)))},directives:[i.s,A.a,h.b,m.a],pipes:[i.b],styles:["[_nghost-%COMP%]{display:block;background-color:var(--be-background);padding:15px;border-radius:4px;width:490px;max-width:90vw;min-height:390px;overflow:auto;position:relative;text-align:center;box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-icon-button[_ngcontent-%COMP%]{transition:transform .1s ease-in-out}.mat-icon-button[_ngcontent-%COMP%]:hover{transform:scale(1.6)}"],changeDetection:0}),e})();function be(e,t){if(1&e){const e=d.ac();d.Zb(0,"mat-expansion-panel",5),d.hc("opened",(function(){d.Ec(e);const n=t.$implicit;return d.lc(2).toggleMenuItem(n)}))("closed",(function(){d.Ec(e);const n=t.$implicit;return d.lc(2).toggleMenuItem(n)})),d.Zb(1,"mat-expansion-panel-header"),d.Zb(2,"mat-panel-title"),d.Ub(3,"mat-icon",6),d.Zb(4,"span",7),d.Pc(5),d.Yb(),d.Yb(),d.Yb(),d.Zb(6,"div",8),d.Zb(7,"div",9),d.Zb(8,"label",10),d.Pc(9,"Label"),d.Yb(),d.Zb(10,"input",11),d.hc("ngModelChange",(function(n){return d.Ec(e),t.$implicit.label=n}))("ngModelChange",(function(){return d.Ec(e),d.lc(2).menus.commitChanges()})),d.Yb(),d.Yb(),d.Zb(11,"div",9),d.Zb(12,"label",10),d.Pc(13,"Type"),d.Yb(),d.Zb(14,"select",12),d.hc("ngModelChange",(function(n){return d.Ec(e),t.$implicit.type=n}))("ngModelChange",(function(){return d.Ec(e),d.lc(2).menus.commitChanges()})),d.Zb(15,"option",13),d.Pc(16,"Link"),d.Yb(),d.Zb(17,"option",14),d.Pc(18,"Route"),d.Yb(),d.Zb(19,"option",15),d.Pc(20,"Page"),d.Yb(),d.Yb(),d.Yb(),d.Zb(21,"div",9),d.Zb(22,"label",10),d.Pc(23,"Action"),d.Yb(),d.Zb(24,"input",11),d.hc("ngModelChange",(function(n){return d.Ec(e),t.$implicit.action=n}))("ngModelChange",(function(){return d.Ec(e),d.lc(2).menus.commitChanges()})),d.Yb(),d.Yb(),d.Zb(25,"div",9),d.Zb(26,"label",10),d.Pc(27,"Condition"),d.Yb(),d.Zb(28,"select",12),d.hc("ngModelChange",(function(n){return d.Ec(e),t.$implicit.condition=n}))("ngModelChange",(function(){return d.Ec(e),d.lc(2).menus.commitChanges()})),d.Zb(29,"option",16),d.Pc(30,"None"),d.Yb(),d.Zb(31,"option",17),d.Pc(32,"Show to Logged in Users Only"),d.Yb(),d.Zb(33,"option",18),d.Pc(34,"Show to Guest Users Only"),d.Yb(),d.Zb(35,"option",19),d.Pc(36,"Show to Admin Only"),d.Yb(),d.Yb(),d.Yb(),d.Zb(37,"div",9),d.Zb(38,"label",10),d.Pc(39,"Open link in"),d.Yb(),d.Zb(40,"select",12),d.hc("ngModelChange",(function(n){return d.Ec(e),t.$implicit.target=n}))("ngModelChange",(function(){return d.Ec(e),d.lc(2).menus.commitChanges()})),d.Zb(41,"option",16),d.Pc(42,"Same Window"),d.Yb(),d.Zb(43,"option",20),d.Pc(44,"New Window"),d.Yb(),d.Yb(),d.Yb(),d.Zb(45,"div",21,22),d.hc("click",(function(){d.Ec(e);const n=t.$implicit,i=d.Bc(46);return d.lc(2).openIconSelector(i,n)})),d.Zb(47,"label",10),d.Pc(48,"Icon"),d.Yb(),d.Zb(49,"input",23),d.hc("ngModelChange",(function(n){return d.Ec(e),t.$implicit.icon=n})),d.Yb(),d.Ub(50,"mat-icon",24),d.Yb(),d.Yb(),d.Zb(51,"mat-action-row"),d.Zb(52,"button",25),d.hc("click",(function(){return d.Ec(e),d.lc(2).confirmMenuItemDeletion()})),d.Pc(53,"Remove"),d.Yb(),d.Yb(),d.Yb()}if(2&e){const e=t.$implicit;d.Gb("data-id",e.id),d.Fb(5),d.Qc(e.label),d.Fb(3),d.uc("for",e.id+"-label"),d.Fb(2),d.uc("id",e.id+"-label"),d.tc("ngModel",e.label),d.Fb(2),d.uc("for",e.id+"-type"),d.Fb(2),d.uc("id",e.id+"-type"),d.tc("ngModel",e.type),d.Fb(8),d.uc("for",e.id+"-action"),d.Fb(2),d.uc("id",e.id+"-action"),d.tc("ngModel",e.action),d.Fb(2),d.uc("for",e.id+"-condition"),d.Fb(2),d.uc("id",e.id+"-condition"),d.tc("ngModel",e.condition),d.Fb(1),d.tc("ngValue",null),d.Fb(9),d.uc("for",e.id+"-target"),d.Fb(2),d.uc("id",e.id+"-target"),d.tc("ngModel",e.target),d.Fb(1),d.tc("ngValue",null),d.Fb(6),d.uc("for",e.id+"-icon"),d.Fb(2),d.uc("id",e.id+"-icon"),d.tc("ngModel",e.icon),d.Fb(1),d.tc("svgIcon",e.icon)}}function de(e,t){if(1&e){const e=d.ac();d.Zb(0,"mat-accordion",3),d.hc("cdkDropListDropped",(function(t){return d.Ec(e),d.lc().reorderMenuItems(t)})),d.Nc(1,be,54,23,"mat-expansion-panel",4),d.Yb()}if(2&e){const e=t.ngIf;d.Fb(1),d.tc("ngForOf",e.items)}}function ue(e,t){1&e&&(d.Zb(0,"div",26),d.Pc(1,"This menu has no items yet."),d.Yb())}let me=(()=>{class e{constructor(e,t,n,i){this.menus=e,this.modal=t,this.overlayPanel=n,this.cd=i,this.subscriptions=[]}ngOnDestroy(){this.subscriptions.forEach(e=>{e&&e.unsubscribe()})}reorderMenuItems(e){this.menus.reorderActiveMenuItems(e.previousIndex,e.currentIndex)}toggleMenuItem(e){this.selectedMenuItem=this.selectedMenuItem===e?null:e}confirmMenuItemDeletion(){this.modal.show(D.a,{title:"Delete Menu Item",body:"Are you sure you want to delete this menu item?",ok:"Delete"}).afterClosed().subscribe(e=>{e&&(this.menus.removeItem(this.selectedMenuItem),this.selectedMenuItem=null)})}openIconSelector(e,t){this.overlayPanel.open(le,{position:K.a,origin:new d.m(e)}).valueChanged().subscribe(e=>{t.icon=e,this.menus.commitChanges(),this.cd.detectChanges()})}}return e.\u0275fac=function(t){return new(t||e)(d.Tb(H),d.Tb(C.a),d.Tb(J.a),d.Tb(d.i))},e.\u0275cmp=d.Nb({type:e,selectors:[["menu-items"]],decls:6,vars:4,consts:[["trans","",1,"title"],["cdkDropList","",3,"cdkDropListDropped",4,"ngIf","ngIfElse"],["noActiveMenu",""],["cdkDropList","",3,"cdkDropListDropped"],["class","mat-elevation-z menu-item-container","cdkDrag","",3,"opened","closed",4,"ngFor","ngForOf"],["cdkDrag","",1,"mat-elevation-z","menu-item-container",3,"opened","closed"],["cdkDragHandle","","svgIcon","drag-handle",1,"drag-handle"],[1,"name"],[1,"many-inputs","menu-item-list"],[1,"input-container"],["trans","",3,"for"],["type","text",3,"ngModel","id","ngModelChange"],[3,"ngModel","id","ngModelChange"],["value","link","trans",""],["value","route","trans",""],["value","page","trans",""],["trans","",3,"ngValue"],["value","auth","trans",""],["value","guest","trans",""],["value","admin","trans",""],["value","_blank","trans",""],[1,"input-container","icon-input-container",3,"click"],["iconInput",""],["type","text","readonly","","placeholder","(Optional)","trans-placeholder","",3,"ngModel","id","ngModelChange"],[3,"svgIcon"],["mat-button","","color","warn","trans","",1,"delete-button",3,"click"],["trans","",1,"no-menu-items"]],template:function(e,t){if(1&e&&(d.Zb(0,"div",0),d.Pc(1,"Menu Items"),d.Yb(),d.Nc(2,de,2,1,"mat-accordion",1),d.mc(3,"async"),d.Nc(4,ue,2,0,"ng-template",null,2,d.Oc)),2&e){const e=d.Bc(5);d.Fb(2),d.tc("ngIf",d.nc(3,2,t.menus.activeMenu$))("ngIfElse",e)}},directives:[p.a,i.t,ie.a,q.d,i.s,ie.c,q.a,ie.f,ie.g,m.a,q.b,a.c,a.t,a.w,a.F,a.y,a.I,ie.d,h.b],pipes:[i.b],styles:["[_nghost-%COMP%]{display:block}.title[_ngcontent-%COMP%]{margin:35px 0 5px}.no-menu-items[_ngcontent-%COMP%]{font-size:1.6rem;font-style:italic;color:var(--be-secondary-text);margin:10px 0}.icon-input-container[_ngcontent-%COMP%]{position:relative}.icon-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:35px}.icon-input-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:absolute;top:36px;left:8px;color:var(--be-secondary-text)}.menu-item-list[_ngcontent-%COMP%]{padding-top:25px}.mat-expansion-panel[_ngcontent-%COMP%]{margin-bottom:10px;border-radius:4px;border:1px solid var(--be-divider-default)}.mat-expansion-panel-header[_ngcontent-%COMP%]{min-height:57px}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{border-bottom:1px solid var(--be-divider-default)}.mat-action-row[_ngcontent-%COMP%]{border:none;padding:0 15px 10px}.drag-handle[_ngcontent-%COMP%]{display:block;color:var(--be-secondary-text);margin-right:8px;cursor:move}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0}),e})();function pe(e,t){if(1&e&&(d.Zb(0,"option",15),d.Pc(1),d.Yb()),2&e){const e=t.$implicit,n=d.lc(2);d.tc("ngValue",e),d.Fb(1),d.Qc(n.getDisplayName(e))}}function he(e,t){if(1&e){const e=d.ac();d.Zb(0,"div",4),d.Zb(1,"div",5),d.Zb(2,"div",6),d.Zb(3,"label",7),d.Pc(4,"Menu Name"),d.Yb(),d.Zb(5,"input",8),d.hc("ngModelChange",(function(n){return d.Ec(e),t.ngIf.name=n}))("ngModelChange",(function(){return d.Ec(e),d.lc().menus.commitChanges()})),d.Yb(),d.Yb(),d.Zb(6,"div",6),d.Zb(7,"label",9),d.Pc(8,"Menu Position"),d.Yb(),d.Zb(9,"select",10),d.hc("ngModelChange",(function(n){return d.Ec(e),t.ngIf.position=n}))("ngModelChange",(function(){return d.Ec(e),d.lc().menus.commitChanges()})),d.Nc(10,pe,2,2,"option",11),d.Yb(),d.Yb(),d.Yb(),d.Ub(11,"menu-items"),d.Zb(12,"div",12),d.Zb(13,"button",13),d.hc("click",(function(){return d.Ec(e),d.lc().confirmMenuDeletion()})),d.Pc(14,"Delete Menu"),d.Yb(),d.Zb(15,"button",14),d.hc("click",(function(){return d.Ec(e),d.lc().openAddItemPanel()})),d.Pc(16,"Add Item"),d.Yb(),d.Yb(),d.Yb()}if(2&e){const e=t.ngIf,n=d.lc();d.Fb(5),d.tc("ngModel",e.name),d.Fb(4),d.tc("ngModel",e.position),d.Fb(1),d.tc("ngForOf",n.appearance.config.menus.positions)}}function ge(e,t){if(1&e){const e=d.ac();d.Zb(0,"div",19),d.hc("click",(function(){d.Ec(e);const n=t.$implicit;return d.lc(2).setActiveMenu(n)})),d.Zb(1,"span",20),d.Pc(2),d.Yb(),d.Ub(3,"mat-icon",21),d.Yb()}if(2&e){const e=t.$implicit;d.Fb(2),d.Qc(e.name)}}function fe(e,t){if(1&e){const e=d.ac();d.Zb(0,"div",16),d.Nc(1,ge,4,1,"div",17),d.mc(2,"async"),d.Zb(3,"div",12),d.Zb(4,"button",18),d.hc("click",(function(){return d.Ec(e),d.lc().menus.create()})),d.Pc(5,"Add a Menu"),d.Yb(),d.Yb(),d.Yb()}if(2&e){const e=d.lc();d.Fb(1),d.tc("ngForOf",d.nc(2,1,e.menus.allMenus$))}}const ve=function(e){return["Menus",e]};let ye=(()=>{class e{constructor(e,t,n,i,a,o){this.appearance=e,this.menus=t,this.modal=n,this.settings=i,this.panel=a,this.el=o,this.menus.setFromJson(this.settings.get("menus"))}openAddItemPanel(){const e=K.a.slice();e[0].offsetX=10,e[1].offsetX=10,this.panel.open(se,{position:e,origin:this.el,panelClass:"add-menu-item-panel-container"})}openPreviousPanel(){this.menus.activeMenu$.value?this.menus.activeMenu$.next(null):this.appearance.closeActivePanel()}setActiveMenu(e){this.menus.activeMenu$.next(e)}confirmMenuDeletion(){this.modal.show(D.a,{title:"Delete Menu",body:"Are you sure you want to delete this menu?",ok:"Delete"}).afterClosed().subscribe(e=>{e&&this.menus.deleteActive()})}getDisplayName(e){return e.replace(/-/g," ")}}return e.\u0275fac=function(t){return new(t||e)(d.Tb(c.a),d.Tb(H),d.Tb(C.a),d.Tb(B.a),d.Tb(J.a),d.Tb(d.m))},e.\u0275cmp=d.Nb({type:e,selectors:[["menus-appearance-panel"]],decls:6,vars:7,consts:[[3,"path","back"],[1,"appearance-panel-content"],["class","menu-panel",4,"ngIf","ngIfElse"],["allMenuList",""],[1,"menu-panel"],[1,"many-inputs","menu-settings"],[1,"input-container"],["for","menu-name","trans",""],["type","text","id","menu-name",3,"ngModel","ngModelChange"],["for","menu-position","trans",""],["id","menu-position",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"action-buttons"],["mat-button","","color","warn","trans","",3,"click"],["mat-button","","color","accent","trans","",1,"button","flat","add-item-button",3,"click"],[3,"ngValue"],[1,"menus"],["class","menu nav-item",3,"click",4,"ngFor","ngForOf"],["mat-button","","color","accent","trans","",1,"button","primary",3,"click"],[1,"menu","nav-item",3,"click"],[1,"name"],["svgIcon","keyboard-arrow-right",1,"actions"]],template:function(e,t){if(1&e&&(d.Zb(0,"appearance-panel-meta",0),d.hc("back",(function(){return t.openPreviousPanel()})),d.Yb(),d.Zb(1,"div",1),d.Nc(2,he,17,3,"div",2),d.mc(3,"async"),d.Nc(4,fe,6,3,"ng-template",null,3,d.Oc),d.Yb()),2&e){const e=d.Bc(5);d.tc("path",d.xc(5,ve,t.menus.activeMenu$.value&&t.menus.activeMenu$.value.name)),d.Fb(2),d.tc("ngIf",d.nc(3,3,t.menus.activeMenu$))("ngIfElse",e)}},directives:[g.a,i.t,p.a,a.c,a.t,a.w,a.F,i.s,me,h.b,a.y,a.I,m.a],pipes:[i.b],styles:["[_nghost-%COMP%]{display:block}.menu-settings[_ngcontent-%COMP%]{margin:10px 0}.menu-settings[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{text-transform:capitalize}.action-buttons[_ngcontent-%COMP%]{text-align:right;margin:10px 0}"],changeDetection:0}),e})();function Pe(e,t){if(1&e&&(d.Xb(0),d.Zb(1,"div",3),d.Zb(2,"label",4),d.Pc(3),d.Yb(),d.Ub(4,"textarea",5),d.Yb(),d.Wb()),2&e){const e=t.$implicit;d.Fb(2),d.tc("for",e.key),d.Fb(1),d.Qc(e.name),d.Fb(1),d.tc("id",e.key)("formControlName",e.key)("placeholder",e.defaultValue)}}const Ce=function(){return["Seo Settings"]};let Me=(()=>{class e{constructor(e,t){this.editor=e,this.fb=t,this.form=this.fb.group({})}ngOnInit(){this.seoFields=this.editor.defaultSettings.seo_fields,this.seoFields.forEach(e=>{this.form.addControl(e.key,this.fb.control(e.value))}),this.form.valueChanges.subscribe(e=>{this.editor.addChanges(e)})}}return e.\u0275fac=function(t){return new(t||e)(d.Tb(c.a),d.Tb(a.g))},e.\u0275cmp=d.Nb({type:e,selectors:[["seo-appearance-panel"]],decls:3,vars:4,consts:[[3,"path","back"],[1,"appearance-panel-content","many-inputs",3,"formGroup"],[4,"ngFor","ngForOf"],[1,"input-container"],["trans","",3,"for"],["type","text","rows","2",3,"id","formControlName","placeholder"]],template:function(e,t){1&e&&(d.Zb(0,"appearance-panel-meta",0),d.hc("back",(function(){return t.editor.closeActivePanel()})),d.Yb(),d.Zb(1,"div",1),d.Nc(2,Pe,5,5,"ng-container",2),d.Yb()),2&e&&(d.tc("path",d.wc(3,Ce)),d.Fb(1),d.tc("formGroup",t.form),d.Fb(1),d.tc("ngForOf",t.seoFields))},directives:[g.a,a.u,a.l,i.s,p.a,a.c,a.t,a.j],styles:["label[_ngcontent-%COMP%]{text-transform:capitalize}"],changeDetection:0}),e})();var xe=n("FtGj"),ke=n("5o4b");const Ye=["editor"];function Ze(e,t){1&e&&(d.Zb(0,"p",11),d.Pc(1,"If entering javascript, wrap it with <script><\/script> tag."),d.Yb())}let Oe=(()=>{class e{constructor(e,t,n){this.dialogRef=e,this.data=t,this.lazyLoader=n,this.loading$=new M.a(!1),this.syntaxInvalid$=new M.a(!1)}ngOnInit(){this.initEditor(this.data.contents,this.data.language),this.overrideDialogCloseEvents()}confirm(){this.close(this.editor.getValue())}close(e){this.dialogRef.close(e)}initEditor(e,t="html"){this.loading$.next(!0),this.lazyLoader.loadAsset("js/ace/ace.js",{type:"js"}).then(()=>{this.editor=ace.edit(this.editorEl.nativeElement),this.editor.getSession().setMode("ace/mode/"+t),this.editor.setTheme("ace/theme/chrome"),this.editor.$blockScrolling=1/0,e&&this.editor.setValue(e,1),this.editor.getSession().on("changeAnnotation",()=>{const e=this.editor.getSession().getAnnotations();if(e[0]&&/doctype first/.test(e[0].text))return e.splice(0,1),void this.editor.getSession().setAnnotations(e);const t=this.editor.getSession().getAnnotations().filter(e=>"error"===e.type).length>0;this.syntaxInvalid$.next(t)}),this.loading$.next(!1)})}overrideDialogCloseEvents(){this.dialogRef.disableClose=!0,this.dialogRef.backdropClick().subscribe(()=>{this.close()}),this.dialogRef.keydownEvents().pipe(Object(O.a)(e=>e.keyCode===xe.g)).subscribe(()=>this.close())}}return e.\u0275fac=function(t){return new(t||e)(d.Tb(x.h),d.Tb(x.a),d.Tb(ke.a))},e.\u0275cmp=d.Nb({type:e,selectors:[["code-editor-modal"]],viewQuery:function(e,t){var n;1&e&&d.Lc(Ye,!0),2&e&&d.Ac(n=d.ic())&&(t.editorEl=n.first)},decls:18,vars:7,consts:[[1,"modal-header"],["mat-dialog-title","","trans","",1,"modal-title"],["type","button","tabindex","-1",1,"close-button","no-style",3,"click"],["svgIcon","close"],[1,"editor-container"],["class","info","trans","",4,"ngIf"],[1,"editor"],["editor",""],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled","click"],[1,"overlay",3,"isVisible"],["trans","",1,"info"]],template:function(e,t){1&e&&(d.Zb(0,"div",0),d.Zb(1,"h2",1),d.Pc(2,"Code Editor"),d.Yb(),d.Zb(3,"button",2),d.hc("click",(function(){return t.close()})),d.Ub(4,"mat-icon",3),d.Yb(),d.Yb(),d.Zb(5,"mat-dialog-content"),d.Zb(6,"div",4),d.Nc(7,Ze,2,0,"p",5),d.Ub(8,"div",6,7),d.Yb(),d.Yb(),d.Zb(10,"mat-dialog-actions"),d.Zb(11,"button",8),d.hc("click",(function(){return t.close()})),d.Pc(12,"Cancel"),d.Yb(),d.Zb(13,"button",9),d.hc("click",(function(){return t.confirm()})),d.mc(14,"async"),d.Pc(15,"Update"),d.Yb(),d.Yb(),d.Ub(16,"loading-indicator",10),d.mc(17,"async")),2&e&&(d.Fb(7),d.tc("ngIf","html"===t.data.language),d.Fb(6),d.tc("disabled",d.nc(14,3,t.syntaxInvalid$)),d.Fb(3),d.tc("isVisible",d.nc(17,5,t.loading$)))},directives:[x.i,p.a,m.a,x.f,i.t,x.c,h.b,A.a],pipes:[i.b],styles:["[_nghost-%COMP%]{display:block;width:800px;max-width:100%}.modal-header[_ngcontent-%COMP%]{margin:0 0 15px}.editor[_ngcontent-%COMP%]{min-height:550px;border:1px solid var(--be-divider-default);font-size:1.4rem}.info[_ngcontent-%COMP%]{color:var(--be-secondary-text)}"],changeDetection:0}),e})();const we=function(){return["Custom Code"]};let Ie=(()=>{class e{constructor(e,t,n,i){this.editor=e,this.fb=t,this.modal=n,this.toast=i,this.form=this.fb.group({"custom-code.css":[""],"custom-code.html":[""]})}ngOnInit(){const e={};Object.keys(this.form.controls).forEach(t=>{e[t]=this.editor.currentValue(t)}),this.form.patchValue(e)}openModal(e){const t="custom-code."+e,n=this.form.value[t]||"";this.modal.open(Oe,{contents:this.form.value[t],language:e}).afterClosed().subscribe(i=>{if(void 0===i||n===i)return;const a={[t]:i};this.form.patchValue(a),this.editor.saveChanges(a).subscribe(()=>{this.addCodeToPreview(e,i),this.toast.open("Custom code saved")})})}addCodeToPreview(e,t){this.editor.postMessage("css"===e?new V.f(t):new V.g(t))}}return e.\u0275fac=function(t){return new(t||e)(d.Tb(c.a),d.Tb(a.g),d.Tb(C.a),d.Tb(k.a))},e.\u0275cmp=d.Nb({type:e,selectors:[["custom-code-appearance-panel"]],decls:12,vars:2,consts:[[3,"path","back"],[1,"appearance-panel-content"],["type","button",1,"nav-item",3,"click"],["trans","",1,"text"],["trans","",1,"actions"],[1,"nav-item",3,"click"]],template:function(e,t){1&e&&(d.Zb(0,"appearance-panel-meta",0),d.hc("back",(function(){return t.editor.closeActivePanel()})),d.Yb(),d.Zb(1,"div",1),d.Zb(2,"button",2),d.hc("click",(function(){return t.openModal("css")})),d.Zb(3,"span",3),d.Pc(4,"Custom CSS"),d.Yb(),d.Zb(5,"span",4),d.Pc(6,"Modify"),d.Yb(),d.Yb(),d.Zb(7,"button",5),d.hc("click",(function(){return t.openModal("html")})),d.Zb(8,"span",3),d.Pc(9,"Custom HTML & Javascript"),d.Yb(),d.Zb(10,"span",4),d.Pc(11,"Modify"),d.Yb(),d.Yb(),d.Yb()),2&e&&d.tc("path",d.wc(1,we))},directives:[g.a,p.a],styles:[".actions[_ngcontent-%COMP%]{color:var(--be-link);font-size:1.3rem}"],changeDetection:0}),e})();const Fe=["iframe"];function _e(e,t){1&e&&(d.Zb(0,"span",15),d.Pc(1,"Save"),d.Yb())}function $e(e,t){1&e&&(d.Zb(0,"span",15),d.Pc(1,"Saved"),d.Yb())}function Te(e,t){1&e&&d.Ub(0,"general-appearance-panel")}function Ne(e,t){1&e&&d.Ub(0,"themes-appearance-panel")}function Ee(e,t){1&e&&d.Ub(0,"menus-appearance-panel")}function Se(e,t){1&e&&d.Ub(0,"seo-appearance-panel")}function De(e,t){1&e&&d.Ub(0,"custom-code-appearance-panel")}function Ae(e,t){}function Ve(e,t){1&e&&d.Nc(0,Ae,0,0,"ng-template",20),2&e&&d.tc("cdkPortalOutlet",t.ngIf)}function Ue(e,t){if(1&e&&(d.Xb(0),d.Nc(1,Ve,1,1,void 0,19),d.mc(2,"async"),d.Wb()),2&e){const e=d.lc(2);d.Fb(1),d.tc("ngIf",d.nc(2,1,e.panelPortal$))}}function Le(e,t){if(1&e&&(d.Xb(0),d.Xb(1,16),d.Nc(2,Te,1,0,"general-appearance-panel",17),d.Nc(3,Ne,1,0,"themes-appearance-panel",17),d.Nc(4,Ee,1,0,"menus-appearance-panel",17),d.Nc(5,Se,1,0,"seo-appearance-panel",17),d.Nc(6,De,1,0,"custom-code-appearance-panel",17),d.Nc(7,Ue,3,3,"ng-container",18),d.Wb(),d.Wb()),2&e){const e=t.ngIf;d.Fb(1),d.tc("ngSwitch",e.name),d.Fb(1),d.tc("ngSwitchCase","general"),d.Fb(1),d.tc("ngSwitchCase","themes"),d.Fb(1),d.tc("ngSwitchCase","menus"),d.Fb(1),d.tc("ngSwitchCase","seo-settings"),d.Fb(1),d.tc("ngSwitchCase","custom-code")}}const je=function(){return[]},Re=function(e){return{panel:e}};function Qe(e,t){if(1&e&&(d.Zb(0,"a",23),d.Zb(1,"span",24),d.Pc(2),d.Yb(),d.Ub(3,"mat-icon",25),d.Yb()),2&e){const e=t.$implicit,n=d.lc(2);d.tc("routerLink",d.wc(3,je))("queryParams",d.xc(4,Re,n.slugify(e.name))),d.Fb(2),d.Qc(n.viewName(e.name))}}function ze(e,t){if(1&e&&(d.Zb(0,"div",21),d.Nc(1,Qe,4,6,"a",22),d.Yb()),2&e){const e=d.lc();d.Fb(1),d.tc("ngForOf",e.editor.config.sections)}}let Ge=(()=>{class e{constructor(e,t,n,i){this.editor=e,this.router=t,this.route=n,this.breakpoints=i,this.leftColumnIsHidden=!1,this.panelPortal$=this.editor.activePanel$.pipe(Object(l.a)(e=>e&&e.component?new r.d(e.component):null))}ngOnInit(){this.leftColumnIsHidden=this.breakpoints.isMobile$.value,this.editor.init(this.iframe.nativeElement,this.route.snapshot.data.defaultSettings),this.routerSub=this.route.queryParams.subscribe(e=>{this.editor.openPanel(e.panel)})}ngOnDestroy(){this.routerSub&&this.routerSub.unsubscribe()}closeEditor(){this.router.navigate(["admin"])}slugify(e){return Object(s.a)(e)}viewName(e){return e.replace("-"," ")}toggleLeftSidebar(){this.leftColumnIsHidden=!this.leftColumnIsHidden}}return e.\u0275fac=function(t){return new(t||e)(d.Tb(c.a),d.Tb(o.e),d.Tb(o.a),d.Tb(b.a))},e.\u0275cmp=d.Nb({type:e,selectors:[["appearance"]],viewQuery:function(e,t){var n;1&e&&d.Lc(Fe,!0),2&e&&d.Ac(n=d.ic())&&(t.iframe=n.first)},decls:25,vars:17,consts:[[1,"sidebar",3,"opened","mode"],[1,"header"],[1,"back-button",3,"click"],["svgIcon","close"],["trans","",1,"title"],["mat-raised-button","","color","accent",1,"button","primary","save-button",3,"disabled","click"],["trans","",4,"ngIf","ngIfElse"],["saved",""],[4,"ngIf","ngIfElse"],["navigation",""],[1,"live-preview"],["src","about:blank"],["iframe",""],["mat-fab","",1,"sidebar-toggle-button",3,"click"],["svgIcon","edit"],["trans",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngIf"],[3,"cdkPortalOutlet"],[1,"root-navigation"],["class","nav-item",3,"routerLink","queryParams",4,"ngFor","ngForOf"],[1,"nav-item",3,"routerLink","queryParams"],["trans","",1,"text"],["svgIcon","keyboard-arrow-right",1,"actions"]],template:function(e,t){if(1&e&&(d.Zb(0,"mat-sidenav-container"),d.Zb(1,"mat-sidenav",0),d.mc(2,"async"),d.Zb(3,"div",1),d.Zb(4,"div",2),d.hc("click",(function(){return t.closeEditor()})),d.Ub(5,"mat-icon",3),d.Yb(),d.Zb(6,"div",4),d.Pc(7,"Appearance Editor"),d.Yb(),d.Zb(8,"button",5),d.hc("click",(function(){return t.editor.saveChanges()})),d.mc(9,"async"),d.mc(10,"async"),d.Nc(11,_e,2,0,"span",6),d.mc(12,"async"),d.Nc(13,$e,2,0,"ng-template",null,7,d.Oc),d.Yb(),d.Yb(),d.Nc(15,Le,8,6,"ng-container",8),d.mc(16,"async"),d.Nc(17,ze,2,1,"ng-template",null,9,d.Oc),d.Yb(),d.Zb(19,"mat-sidenav-content"),d.Zb(20,"div",10),d.Ub(21,"iframe",11,12),d.Yb(),d.Yb(),d.Yb(),d.Zb(23,"button",13),d.hc("click",(function(){return t.toggleLeftSidebar()})),d.Ub(24,"mat-icon",14),d.Yb()),2&e){const e=d.Bc(14),n=d.Bc(18);d.Fb(1),d.tc("opened",!t.leftColumnIsHidden)("mode",d.nc(2,7,t.breakpoints.isMobile$)?"over":"side"),d.Fb(7),d.tc("disabled",!d.nc(9,9,t.editor.changes$)||d.nc(10,11,t.editor.loading$)),d.Fb(3),d.tc("ngIf",d.nc(12,13,t.editor.changes$))("ngIfElse",e),d.Fb(4),d.tc("ngIf",d.nc(16,15,t.editor.activePanel$))("ngIfElse",n)}},directives:[u.b,u.a,m.a,p.a,h.b,i.t,u.c,i.x,i.y,i.z,P,G,ye,Me,Ie,r.c,i.s,o.h],pipes:[i.b],styles:[".mat-sidenav-container[_ngcontent-%COMP%]{height:100vh}.sidebar-toggle-button[_ngcontent-%COMP%]{display:none;position:fixed;bottom:15px;right:15px;z-index:3}.sidebar[_ngcontent-%COMP%]{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);width:330px;background-color:var(--be-background-alternative)}.sidebar[_ngcontent-%COMP%]   .root-navigation[_ngcontent-%COMP%]{padding:10px}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;padding-right:10px;border-bottom:1px solid var(--be-divider-default);height:50px}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-left:10px;font-size:1.7rem;font-weight:300}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]{margin-left:auto;max-height:36px;box-shadow:none}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:disabled{cursor:default}.live-preview[_ngcontent-%COMP%]{display:flex;height:100%;justify-content:center;align-items:center;flex:1 1 auto;position:relative}.live-preview[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{border:none;width:100%;height:100%}@media screen and (max-width:768px){.sidebar-toggle-button[_ngcontent-%COMP%]{display:block}}"],changeDetection:0}),e})(),qe=(()=>{class e{constructor(e,t){this.editor=e,this.modal=t}canDeactivate(){return!this.editor.changes$.value||this.modal.show(D.a,{title:"Close Appearance Editor",body:"Are you sure you want to close appearance editor?",bodyBold:"All unsaved changes will be lost.",ok:"Close",cancel:"Stay"}).afterClosed()}}return e.\u0275fac=function(t){return new(t||e)(d.dc(c.a),d.dc(C.a))},e.\u0275prov=d.Pb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var We=n("0QyJ"),Be=n("JIr8"),Xe=n("5+tZ"),He=n("EY2u"),Je=n("LRne");const Ke=[{path:"",component:Ge,data:{permissions:["appearance.update"]},resolve:{defaultSettings:(()=>{class e{constructor(e,t){this.router=e,this.http=t}resolve(e,t){return this.http.get("admin/appearance/values").pipe(Object(Be.a)(()=>(this.router.navigate(["/admin"]),He.a)),Object(Xe.a)(e=>e?Object(Je.a)(e):(this.router.navigate(["/admin"]),He.a)))}}return e.\u0275fac=function(t){return new(t||e)(d.dc(o.e),d.dc(Y.a))},e.\u0275prov=d.Pb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},canActivate:[We.a],canDeactivate:[qe],children:[{path:""},{path:":panel"},{path:":panel/:activeItem"}]}];let et=(()=>{class e{}return e.\u0275mod=d.Rb({type:e}),e.\u0275inj=d.Qb({factory:function(t){return new(t||e)},imports:[[o.i.forChild(Ke)],o.i]}),e})();var tt=n("X3pI");let nt=(()=>{class e{}return e.\u0275mod=d.Rb({type:e}),e.\u0275inj=d.Qb({factory:function(t){return new(t||e)},imports:[[i.c,tt.a,h.c,m.b]]}),e})();var it=n("6rvT"),at=n("MKyN"),ot=n("STbY"),ct=n("bv9b");let st=(()=>{class e{}return e.\u0275mod=d.Rb({type:e}),e.\u0275inj=d.Qb({factory:function(t){return new(t||e)},imports:[[i.c,it.a,m.b]]}),e})(),rt=(()=>{class e{}return e.\u0275mod=d.Rb({type:e}),e.\u0275inj=d.Qb({factory:function(t){return new(t||e)},imports:[[et,i.c,a.n,a.D,nt,it.a,at.a,tt.a,st,ot.b,ct.b,m.b,h.c,x.g,ie.b,q.f,u.d,r.h,w.b]]}),e})();var lt=n("FKr1");n("8LU1"),n("R1ws"),n("nLfN"),n("quSY"),n("u47x"),n("cH1L");let bt=(()=>{class e{}return e.\u0275mod=d.Rb({type:e}),e.\u0275inj=d.Qb({factory:function(t){return new(t||e)},imports:[[i.c,lt.i],lt.i]}),e})();var dt=n("/1cH");let ut=(()=>{class e{}return e.\u0275mod=d.Rb({type:e}),e.\u0275inj=d.Qb({factory:function(t){return new(t||e)},imports:[[i.c,rt,a.D,st,it.a,o.i,tt.a,m.b,h.c,it.a,bt,dt.b,q.f]]}),e})()}}]);