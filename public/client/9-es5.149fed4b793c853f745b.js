function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,o=void 0;try{for(var c,r=e[Symbol.iterator]();!(a=(c=r.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(s){i=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{Eh8b:function(e,t,n){"use strict";n.r(t),n.d(t,"AppAppearanceModule",(function(){return Et}));var a,i,o=n("ofXK"),c=n("3Pt+"),r=n("tyNb"),s=n("WAq7"),l=n("+rOU"),u=n("lJxs"),b=n("fXoL"),d=n("xBj9"),p=n("OnlV"),m=n("XhcP"),h=n("NFeN"),f=n("Rd8u"),g=n("bTqV"),v=n("k9D4"),y=n("a6zP"),k=n("+1cI"),C=function(){return["General"]},P=((a=function(){function e(t,n){_classCallCheck(this,e),this.fb=t,this.editor=n,this.form=this.fb.group({"branding.logo_light":[""],"branding.logo_dark":[""],"branding.favicon":[""],"env.app_name":[""],"branding.site_description":[""]})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,t={};Object.keys(this.form.controls).forEach((function(n){t[n]=e.editor.currentValue(n)})),this.form.patchValue(t),this.form.valueChanges.subscribe((function(t){e.editor.addChanges(t)}))}},{key:"defaultValue",value:function(e){return this.editor.defaultSettings[e]}}]),e}()).\u0275fac=function(e){return new(e||a)(b.Tb(c.g),b.Tb(d.a))},a.\u0275cmp=b.Nb({type:a,selectors:[["general-appearance-panel"]],hostAttrs:[1,"appearance-panel"],decls:16,vars:8,consts:[[3,"path","back"],[1,"appearance-panel-content","many-inputs",3,"formGroup"],["formControlName","branding.logo_light","diskPrefix","branding_media","highlightInPreview",".logo",3,"defaultValue"],["formControlName","branding.logo_dark","diskPrefix","branding_media","highlightInPreview",".logo",3,"defaultValue"],["backendUri","uploads/favicon","diskPrefix","branding_media","formControlName","branding.favicon",3,"defaultValue"],[1,"input-container"],["for","env.app_name","trans",""],["type","text","id","env.app_name","formControlName","env.app_name",3,"placeholder"],["for","branding.site_description","trans",""],["id","branding.site_description","rows","4","formControlName","branding.site_description",3,"placeholder"]],template:function(e,t){1&e&&(b.Zb(0,"appearance-panel-meta",0),b.hc("back",(function(){return t.editor.closeActivePanel()})),b.Yb(),b.Zb(1,"div",1),b.Zb(2,"appearance-image-input",2),b.Pc(3," Logo #1 (For top navbar) "),b.Yb(),b.Zb(4,"appearance-image-input",3),b.Pc(5," Logo #2 (Everywhere else) "),b.Yb(),b.Zb(6,"appearance-image-input",4),b.Pc(7," Favicon "),b.Yb(),b.Zb(8,"div",5),b.Zb(9,"label",6),b.Pc(10,"Site Name"),b.Yb(),b.Ub(11,"input",7),b.Yb(),b.Zb(12,"div",5),b.Zb(13,"label",8),b.Pc(14,"Site Description"),b.Yb(),b.Ub(15,"textarea",9),b.Yb(),b.Yb()),2&e&&(b.tc("path",b.wc(7,C)),b.Fb(1),b.tc("formGroup",t.form),b.Fb(1),b.tc("defaultValue",t.defaultValue("branding.logo_light")),b.Fb(2),b.tc("defaultValue",t.defaultValue("branding.logo_dark")),b.Fb(2),b.tc("defaultValue",t.defaultValue("branding.favicon")),b.Fb(5),b.tc("placeholder",t.defaultValue("env.app_name")),b.Fb(4),b.tc("placeholder",t.defaultValue("branding.site_description")))},directives:[v.a,c.u,c.l,y.a,c.t,c.j,k.a,f.a,c.c],styles:[""],changeDetection:0}),a),x=n("2Vo4"),M=n("0IaG"),_=n("pLZG"),Y=n("LRXf"),Z=((i=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"all",value:function(){return this.http.get("css-theme")}},{key:"create",value:function(e){return this.http.post("css-theme",e)}},{key:"update",value:function(e,t){return this.http.put("css-theme/".concat(e),t)}},{key:"delete",value:function(e){return this.http.delete("css-theme/".concat(e))}}]),e}()).\u0275fac=function(e){return new(e||i)(b.dc(Y.a))},i.\u0275prov=b.Pb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),w=n("i2dy"),O=n("1jcm");function I(e,t){1&e&&(b.Zb(0,"span",6),b.Pc(1,"Update Theme"),b.Yb())}function F(e,t){1&e&&(b.Zb(0,"span",6),b.Pc(1,"Create Theme"),b.Yb())}function T(e,t){if(1&e&&(b.Zb(0,"div",21),b.Pc(1),b.Yb()),2&e){var n=b.lc().ngIf;b.Fb(1),b.Qc(n.name)}}function $(e,t){1&e&&(b.Zb(0,"span"),b.Pc(1,"Update"),b.Yb())}function N(e,t){1&e&&(b.Zb(0,"span"),b.Pc(1,"Create"),b.Yb())}function E(e,t){if(1&e){var n=b.ac();b.Zb(0,"form",7),b.hc("ngSubmit",(function(){return b.Ec(n),b.lc().confirm()})),b.Zb(1,"mat-dialog-content",8),b.Zb(2,"div",9),b.Zb(3,"label",10),b.Pc(4,"Name"),b.Yb(),b.Ub(5,"input",11),b.Nc(6,T,2,1,"div",12),b.Yb(),b.Zb(7,"div",13),b.Zb(8,"mat-slide-toggle",14),b.Pc(9,"Dark Theme"),b.Yb(),b.Zb(10,"p",6),b.Pc(11,"Whether this theme has light text on dark background."),b.Yb(),b.Yb(),b.Zb(12,"div",13),b.Zb(13,"mat-slide-toggle",15),b.Pc(14,"Default Dark Theme"),b.Yb(),b.Zb(15,"p",6),b.Pc(16,"Whether this theme should be used as default dark theme."),b.Yb(),b.Yb(),b.Zb(17,"div",13),b.Zb(18,"mat-slide-toggle",16),b.Pc(19,"Default Light Theme"),b.Yb(),b.Zb(20,"p",6),b.Pc(21,"Whether this theme should be used as default light theme."),b.Yb(),b.Yb(),b.Yb(),b.Zb(22,"mat-dialog-actions"),b.Zb(23,"button",17),b.hc("click",(function(){return b.Ec(n),b.lc().close()})),b.Pc(24,"Cancel"),b.Yb(),b.Zb(25,"button",18),b.mc(26,"async"),b.Nc(27,$,2,0,"span",19),b.Nc(28,N,2,0,"ng-template",null,20,b.Oc),b.Yb(),b.Yb(),b.Yb()}if(2&e){var a=t.ngIf,i=b.Bc(29),o=b.lc();b.tc("formGroup",o.form),b.Fb(6),b.tc("ngIf",a.name),b.Fb(19),b.tc("disabled",b.nc(26,5,o.loading$)),b.Fb(2),b.tc("ngIf",o.data.theme)("ngIfElse",i)}}var S,A=((S=function(){function e(t,n,a,i,o){var c=this;_classCallCheck(this,e),this.dialogRef=t,this.data=n,this.cssTheme=a,this.toast=i,this.fb=o,this.loading$=new x.a(!1),this.errors$=new x.a({}),this.form=this.fb.group({name:[""],is_dark:[!1],default_dark:[!1],default_light:[!1]}),n.theme&&this.form.patchValue(n.theme),this.form.get("default_dark").valueChanges.pipe(Object(_.a)((function(e){return!!e}))).subscribe((function(){c.form.get("default_light").setValue(!1)})),this.form.get("default_light").valueChanges.pipe(Object(_.a)((function(e){return!!e}))).subscribe((function(){c.form.get("default_dark").setValue(!1)}))}return _createClass(e,[{key:"confirm",value:function(){var e=this;(this.data.theme?this.cssTheme.update(this.data.theme.id,this.form.value):this.cssTheme.create(this.form.value)).subscribe((function(t){e.toast.open(e.data.theme?"Theme updated":"Theme created"),e.close(t.theme)}),(function(t){return e.errors$.next(t.messages)}))}},{key:"close",value:function(e){this.dialogRef.close(e)}}]),e}()).\u0275fac=function(e){return new(e||S)(b.Tb(M.h),b.Tb(M.a),b.Tb(Z),b.Tb(w.a),b.Tb(c.g))},S.\u0275cmp=b.Nb({type:S,selectors:[["crupdate-css-theme-modal"]],decls:8,vars:5,consts:[[1,"modal-header"],["mat-dialog-title",""],["trans","",4,"ngIf"],["type","button","tabindex","-1",1,"close-button","no-style",3,"click"],["svgIcon","close"],["ngNativeValidate","",3,"formGroup","ngSubmit",4,"ngIf"],["trans",""],["ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"many-inputs"],[1,"input-container"],["for","name","trans",""],["type","text","id","name","formControlName","name","required","","minlength","3"],["class","error",4,"ngIf"],[1,"setting-toggle-container"],["id","is_dark","formControlName","is_dark","trans",""],["id","default_dark","formControlName","default_dark","trans",""],["id","default_light","formControlName","default_light","trans",""],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],[4,"ngIf","ngIfElse"],["creating",""],[1,"error"]],template:function(e,t){1&e&&(b.Zb(0,"div",0),b.Zb(1,"h2",1),b.Nc(2,I,2,0,"span",2),b.Nc(3,F,2,0,"span",2),b.Yb(),b.Zb(4,"button",3),b.hc("click",(function(){return t.close()})),b.Ub(5,"mat-icon",4),b.Yb(),b.Yb(),b.Nc(6,E,30,7,"form",5),b.mc(7,"async")),2&e&&(b.Fb(2),b.tc("ngIf",t.data.theme),b.Fb(1),b.tc("ngIf",!t.data.theme),b.Fb(3),b.tc("ngIf",b.nc(7,3,t.errors$)))},directives:[M.i,o.t,h.a,f.a,c.u,c.l,M.f,c.c,c.t,c.j,c.E,c.p,O.a,M.c,g.b],pipes:[o.b],styles:["[_nghost-%COMP%]{display:block;width:400px;max-width:100%}"],changeDetection:0}),S),D=n("nYR2"),j=n("/RwR"),L=n("QGXG"),U=n("FBzJ"),V=n("uSwg"),R=n("v4Vz");function Q(e,t){if(1&e&&(b.Zb(0,"li"),b.Zb(1,"color-picker-input",2),b.Pc(2),b.Yb(),b.Yb()),2&e){var n=t.$implicit,a=b.lc();b.Fb(1),b.tc("formControlName",n.key),b.Fb(1),b.Qc(a.viewName(n.key))}}var z,G=((z=function(){function e(t,n){_classCallCheck(this,e),this.editor=t,this.themes=n,this.form=new c.k({}),this.colorCache={}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.editor.setSaveRequest(this.saveColors.bind(this)),Object.entries(this.theme.colors).forEach((function(t){var n=_slicedToArray(t,2),a=n[0],i=n[1];e.form.addControl(a,new c.h(i))})),this.editor.initiated$.subscribe((function(){e.setColors(e.theme.colors),e.form.valueChanges.subscribe((function(t){e.setColors(t),e.editor.addChanges({colors:t})}))}))}},{key:"ngOnDestroy",value:function(){this.editor.setSaveRequest(null)}},{key:"saveColors",value:function(e){return this.themes.update(this.theme.id,e)}},{key:"setColors",value:function(e){var t=this;Object.entries(e).forEach((function(e){var n=_slicedToArray(e,2),a=n[0],i=n[1];t.colorCache[a]!==i&&(t.editor.postMessage(new V.d(a,i)),t.colorCache[a]=i)}))}},{key:"viewName",value:function(e){return e.replace("be-","").replace(/-/g," ")}}]),e}()).\u0275fac=function(e){return new(e||z)(b.Tb(d.a),b.Tb(Z))},z.\u0275cmp=b.Nb({type:z,selectors:[["css-theme-colors-panel"]],inputs:{theme:"theme"},decls:3,vars:4,consts:[[3,"formGroup"],[4,"ngFor","ngForOf"],["trans","",3,"formControlName"]],template:function(e,t){1&e&&(b.Zb(0,"ul",0),b.Nc(1,Q,3,2,"li",1),b.mc(2,"keyvalue"),b.Yb()),2&e&&(b.tc("formGroup",t.form),b.Fb(1),b.tc("ngForOf",b.nc(2,2,t.theme.colors)))},directives:[c.u,c.l,o.s,R.a,f.a,c.t,c.j],pipes:[o.l],styles:[""],changeDetection:0}),z);function q(e,t){1&e&&b.Ub(0,"css-theme-colors-panel",5),2&e&&b.tc("theme",t.ngIf)}function W(e,t){if(1&e){var n=b.ac();b.Zb(0,"li",8),b.hc("click",(function(){b.Ec(n);var e=t.$implicit;return b.lc(2).setSelectedTheme(e)})),b.Zb(1,"div",9),b.Pc(2),b.Yb(),b.Zb(3,"div",10),b.hc("click",(function(e){return b.Ec(n),e.stopPropagation()})),b.Zb(4,"button",11),b.hc("click",(function(){b.Ec(n);var e=t.$implicit;return b.lc(2).setSelectedTheme(e)})),b.Ub(5,"mat-icon",12),b.Yb(),b.Zb(6,"button",11),b.hc("click",(function(){b.Ec(n);var e=t.$implicit;return b.lc(2).openCrupdateThemeModal(e)})),b.Ub(7,"mat-icon",13),b.Yb(),b.Zb(8,"button",11),b.hc("click",(function(){b.Ec(n);var e=t.$implicit;return b.lc(2).maybeDeleteThemeModal(e)})),b.Ub(9,"mat-icon",14),b.Yb(),b.Yb(),b.Yb()}if(2&e){var a=t.$implicit;b.Fb(2),b.Qc(a.name)}}function H(e,t){if(1&e){var n=b.ac();b.Zb(0,"button",6),b.hc("click",(function(){return b.Ec(n),b.lc().openCrupdateThemeModal()})),b.Pc(1,"New Theme"),b.Yb(),b.Zb(2,"ul"),b.Nc(3,W,10,1,"li",7),b.mc(4,"async"),b.Yb()}if(2&e){var a=b.lc();b.Fb(3),b.tc("ngForOf",b.nc(4,1,a.loadedThemes$))}}var B,X,J,K=((B=function(){function e(t,n,a,i,o,c){_classCallCheck(this,e),this.appearance=t,this.modal=n,this.themes=a,this.toast=i,this.router=o,this.route=c,this.loading$=new x.a(!1),this.loadedThemes$=new x.a([]),this.selectedTheme$=new x.a(null),this.path$=this.selectedTheme$.pipe(Object(u.a)((function(e){var t=["Themes"];return e&&t.push(e.name),t})))}return _createClass(e,[{key:"ngOnInit",value:function(){this.reloadThemes()}},{key:"ngOnDestroy",value:function(){this.querySub&&this.querySub.unsubscribe()}},{key:"openCrupdateThemeModal",value:function(e){var t=this;this.modal.open(A,{theme:e}).afterClosed().subscribe((function(e){e&&t.reloadThemes()}))}},{key:"setSelectedTheme",value:function(e){this.router.navigate([],{queryParams:{theme:e&&e.id},queryParamsHandling:"merge"})}},{key:"openPreviousPanel",value:function(){this.selectedTheme$.value?this.setSelectedTheme():this.appearance.closeActivePanel()}},{key:"maybeDeleteThemeModal",value:function(e){var t=this;this.modal.show(j.a,{title:"Delete Theme",body:"Are you sure you want to delete this theme?",ok:"Delete"}).afterClosed().subscribe((function(n){n&&t.deleteTheme(e)}))}},{key:"reloadThemes",value:function(){var e=this;this.loading$.next(!0),this.themes.all().pipe(Object(D.a)((function(){return e.loading$.next(!1)}))).subscribe((function(t){e.loadedThemes$.next(t.pagination.data),e.bindToQueryParams()}))}},{key:"deleteTheme",value:function(e){var t=this;this.themes.delete([e.id]).subscribe((function(){t.toast.open("Theme deleted"),t.reloadThemes()}))}},{key:"bindToQueryParams",value:function(){var e=this;this.querySub||(this.querySub=this.route.queryParams.subscribe((function(t){var n=e.loadedThemes$.value.find((function(e){return e.id===+t.theme}));e.selectedTheme$.next(n)})))}}]),e}()).\u0275fac=function(e){return new(e||B)(b.Tb(d.a),b.Tb(L.a),b.Tb(Z),b.Tb(w.a),b.Tb(r.e),b.Tb(r.a))},B.\u0275cmp=b.Nb({type:B,selectors:[["themes-appearance-panel"]],decls:9,vars:10,consts:[[3,"path","back"],[1,"appearance-panel-content"],[3,"theme",4,"ngIf","ngIfElse"],["themesList",""],[1,"overlay","overlay-partial",3,"isVisible"],[3,"theme"],["mat-raised-button","","color","accent","type","button","trans","",1,"new-theme-button",3,"click"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[1,"nav-item",3,"click"],[1,"name"],[1,"actions",3,"click"],["mat-icon-button","","type","button",3,"click"],["svgIcon","drop-custom"],["svgIcon","edit"],["svgIcon","delete"]],template:function(e,t){if(1&e&&(b.Zb(0,"appearance-panel-meta",0),b.hc("back",(function(){return t.openPreviousPanel()})),b.mc(1,"async"),b.Yb(),b.Zb(2,"div",1),b.Nc(3,q,1,1,"css-theme-colors-panel",2),b.mc(4,"async"),b.Nc(5,H,5,3,"ng-template",null,3,b.Oc),b.Yb(),b.Ub(7,"loading-indicator",4),b.mc(8,"async")),2&e){var n=b.Bc(6);b.tc("path",b.nc(1,4,t.path$)),b.Fb(3),b.tc("ngIf",b.nc(4,6,t.selectedTheme$))("ngIfElse",n),b.Fb(4),b.tc("isVisible",b.nc(8,8,t.loading$))}},directives:[v.a,o.t,U.a,G,g.b,f.a,o.s,h.a],pipes:[o.b],styles:[".new-theme-button[_ngcontent-%COMP%]{margin-bottom:15px}"],changeDetection:0}),B),ee=n("WvtK"),te=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var n in _classCallCheck(this,e),this.type="link",this.order=1,this.condition=null,this.target=null,this.position=0,this.activeExact=!1,t)this[n]=t[n];this.id=Math.floor(999*Math.random())},ne=n("5+WD"),ae=n("f9yG"),ie=n("kmQS"),oe=((X=function(){function e(t,n){_classCallCheck(this,e),this.settings=t,this.appearance=n,this.allMenus$=new x.a([]),this.activeMenu$=new x.a(null)}return _createClass(e,[{key:"create",value:function(){var e=_toConsumableArray(this.allMenus$.value);this.activeMenu$.next(new ae.a({name:"New Menu"})),e.push(this.activeMenu$.value),this.allMenus$.next(e),this.commitChanges()}},{key:"reorderActiveMenuItems",value:function(e,t){var n=Object.assign({},this.activeMenu$.value);Object(ne.g)(n.items,e,t),this.activeMenu$.next(n),this.commitChanges()}},{key:"deleteActive",value:function(){var e=_toConsumableArray(this.allMenus$.value),t=e.indexOf(this.activeMenu$.value);e.splice(t,1),this.activeMenu$.next(null),this.allMenus$.next(e),this.commitChanges()}},{key:"addItem",value:function(e){var t=Object.assign({},this.activeMenu$.value);e=this.transformLocalLinksToRoutes(e),t.items.push(e),this.activeMenu$.next(t),this.commitChanges()}},{key:"removeItem",value:function(e){var t=Object.assign({},this.activeMenu$.value),n=this.activeMenu$.value.items.indexOf(e);t.items.splice(n,1),this.activeMenu$.next(t),this.commitChanges()}},{key:"transformLocalLinksToRoutes",value:function(e){var t=this.settings.getBaseUrl();return"link"!==e.type||-1===e.action.indexOf(t)||(e.type="route",e.action=e.action.replace(this.settings.getBaseUrl(),"")),e}},{key:"commitChanges",value:function(){var e=JSON.stringify(this.allMenus$.value);this.appearance.setConfig("menus",e),this.appearance.addChanges({menus:e})}},{key:"setFromJson",value:function(e){if(e){var t=JSON.parse(e);if(t){var n=t.map((function(e){var t=new ae.a(e);return t.items=t.items.map((function(e){return new te(e)})),t}));this.allMenus$.next(n)}}}}]),e}()).\u0275fac=function(e){return new(e||X)(b.dc(ie.a),b.dc(d.a))},X.\u0275prov=b.Pb({token:X,factory:X.\u0275fac,providedIn:"root"}),X),ce=n("ZfYz"),re=n("sPnx"),se=((J=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"get",value:function(){return this.http.getWithCache("admin/appearance/menu-categories")}}]),e}()).\u0275fac=function(e){return new(e||J)(b.dc(re.a))},J.\u0275prov=b.Pb({token:J,factory:J.\u0275fac,providedIn:"root"}),J),le=n("7EHt");function ue(e,t){if(1&e){var n=b.ac();b.Zb(0,"div",17),b.hc("click",(function(){b.Ec(n);var e=t.$implicit;return b.lc().addRouteMenuItem(e)})),b.Pc(1),b.Yb()}if(2&e){var a=t.$implicit;b.Fb(1),b.Rc("",a," ")}}function be(e,t){if(1&e){var n=b.ac();b.Zb(0,"div",17),b.hc("click",(function(){b.Ec(n);var e=t.$implicit;return b.lc(2).addCustomMenuItem(e)})),b.Pc(1),b.Yb()}if(2&e){var a=t.$implicit;b.Fb(1),b.Qc(a.label)}}function de(e,t){if(1&e&&(b.Zb(0,"mat-expansion-panel",5),b.Zb(1,"mat-expansion-panel-header"),b.Zb(2,"mat-panel-title",6),b.Pc(3),b.Yb(),b.Yb(),b.Zb(4,"div",14),b.Nc(5,be,2,1,"div",15),b.Yb(),b.Yb()),2&e){var n=t.$implicit;b.Fb(3),b.Qc(n.name),b.Fb(2),b.tc("ngForOf",n.items)}}var pe,me=((pe=function(){function e(t,n,a,i,o){_classCallCheck(this,e),this.editor=t,this.appearance=n,this.overlayPanelRef=a,this.fb=i,this.itemCategories=o,this.linkForm=this.fb.group({action:[""],label:[""]})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.itemCategories.get().subscribe((function(t){e.menuItemCategories=t.categories}))}},{key:"addLinkMenuItem",value:function(){this.editor.addItem(new te({type:"link",label:this.linkForm.value.label,action:this.linkForm.value.action})),this.linkForm.reset(),this.close()}},{key:"addRouteMenuItem",value:function(e){this.editor.addItem(new te({type:"route",label:e,action:e})),this.close()}},{key:"addCustomMenuItem",value:function(e){this.editor.addItem(new te(e)),this.close()}},{key:"close",value:function(){this.overlayPanelRef.close()}}]),e}()).\u0275fac=function(e){return new(e||pe)(b.Tb(oe),b.Tb(d.a),b.Tb(ce.a),b.Tb(c.g),b.Tb(se))},pe.\u0275cmp=b.Nb({type:pe,selectors:[["add-menu-item-panel"]],decls:30,vars:3,consts:[[1,"header"],["trans","",1,"title"],["svgIcon","close",3,"click"],[1,"new-item-tabs"],["ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"mat-elevation-z"],["trans",""],[1,"many-inputs","expansion-panel-content"],[1,"input-container"],["for","external-link-url","trans",""],["type","url","id","external-link-url","formControlName","action","required",""],["for","external-link-text","trans",""],["type","text","id","external-link-text","formControlName","label","required",""],["mat-button","","color","accent","type","submit","trans",""],[1,"items-list","expansion-panel-content"],["class","item",3,"click",4,"ngFor","ngForOf"],["class","mat-elevation-z",4,"ngFor","ngForOf"],[1,"item",3,"click"]],template:function(e,t){1&e&&(b.Zb(0,"div",0),b.Zb(1,"span",1),b.Pc(2,"New Menu Item"),b.Yb(),b.Zb(3,"mat-icon",2),b.hc("click",(function(){return t.close()})),b.Yb(),b.Yb(),b.Zb(4,"div",3),b.Zb(5,"mat-accordion"),b.Zb(6,"form",4),b.hc("ngSubmit",(function(){return t.addLinkMenuItem()})),b.Zb(7,"mat-expansion-panel",5),b.Zb(8,"mat-expansion-panel-header"),b.Zb(9,"mat-panel-title",6),b.Pc(10,"Link"),b.Yb(),b.Yb(),b.Zb(11,"div",7),b.Zb(12,"div",8),b.Zb(13,"label",9),b.Pc(14,"URL"),b.Yb(),b.Ub(15,"input",10),b.Yb(),b.Zb(16,"div",8),b.Zb(17,"label",11),b.Pc(18,"Link Text"),b.Yb(),b.Ub(19,"input",12),b.Yb(),b.Yb(),b.Zb(20,"mat-action-row"),b.Zb(21,"button",13),b.Pc(22,"Add"),b.Yb(),b.Yb(),b.Yb(),b.Yb(),b.Zb(23,"mat-expansion-panel",5),b.Zb(24,"mat-expansion-panel-header"),b.Zb(25,"mat-panel-title",6),b.Pc(26,"Route"),b.Yb(),b.Yb(),b.Zb(27,"div",14),b.Nc(28,ue,2,1,"div",15),b.Yb(),b.Yb(),b.Nc(29,de,6,2,"mat-expansion-panel",16),b.Yb(),b.Yb()),2&e&&(b.Fb(6),b.tc("formGroup",t.linkForm),b.Fb(22),b.tc("ngForOf",t.appearance.config.menus.availableRoutes),b.Fb(1),b.tc("ngForOf",t.menuItemCategories))},directives:[f.a,h.a,le.a,c.u,c.l,le.c,le.f,le.g,c.c,c.t,c.j,c.E,le.d,g.b,o.s],styles:["[_nghost-%COMP%]{background-color:var(--be-background-alternative);box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);overflow:hidden;width:300px;border-radius:4px}.header[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:var(--be-background);padding:15px;font-size:1.7rem;font-weight:300;border-bottom:1px solid var(--be-divider-default);margin-bottom:10px}.header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:var(--be-secondary-text);margin-left:auto}.new-item-tabs[_ngcontent-%COMP%]{padding:10px}.items-list[_ngcontent-%COMP%]{overflow:auto;max-height:300px}.items-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{color:var(--be-link);padding-bottom:8px;margin-bottom:8px;border-bottom:1px solid var(--be-divider-default);cursor:pointer}.items-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:hover{text-decoration:underline}.mat-expansion-panel[_ngcontent-%COMP%]{border:1px solid var(--be-divider-default);margin-bottom:10px}.mat-expansion-panel-header[_ngcontent-%COMP%]{min-height:57px}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{border-bottom:1px solid var(--be-divider-default)}.expansion-panel-content[_ngcontent-%COMP%]{padding-top:25px}"],changeDetection:0}),pe),he=n("dz5c");function fe(e,t){if(1&e){var n=b.ac();b.Zb(0,"button",2),b.hc("click",(function(){b.Ec(n);var e=t.$implicit;return b.lc().selectIcon(e)})),b.Ub(1,"mat-icon",3),b.Yb()}if(2&e){var a=t.$implicit;b.Fb(1),b.tc("svgIcon",a)}}var ge,ve=((ge=function(){function e(t,n){_classCallCheck(this,e),this.http=t,this.overlayPanelRef=n,this.icons$=new x.a([]),this.loading$=new x.a(!1),this.iconSelected=new b.p}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.loading$.next(!0),this.http.get("admin/icons").pipe(Object(D.a)((function(){return e.loading$.next(!1)}))).subscribe((function(t){e.icons$.next(t.icons)}))}},{key:"selectIcon",value:function(e){this.iconSelected.observers.length?this.iconSelected.next(e):(this.overlayPanelRef.emitValue(e),this.overlayPanelRef.close())}}]),e}()).\u0275fac=function(e){return new(e||ge)(b.Tb(re.a),b.Tb(ce.a))},ge.\u0275cmp=b.Nb({type:ge,selectors:[["icon-selector"]],outputs:{iconSelected:"iconSelected"},decls:4,vars:6,consts:[["mat-icon-button","",3,"click",4,"ngFor","ngForOf"],[1,"overlay","overlay-partial",3,"isVisible"],["mat-icon-button","",3,"click"],[3,"svgIcon"]],template:function(e,t){1&e&&(b.Nc(0,fe,2,1,"button",0),b.mc(1,"async"),b.Ub(2,"loading-indicator",1),b.mc(3,"async")),2&e&&(b.tc("ngForOf",b.nc(1,2,t.icons$)),b.Fb(2),b.tc("isVisible",b.nc(3,4,t.loading$)))},directives:[o.s,U.a,g.b,h.a],pipes:[o.b],styles:["[_nghost-%COMP%]{display:block;background-color:var(--be-background);padding:15px;border-radius:4px;width:490px;max-width:90vw;min-height:390px;overflow:auto;position:relative;text-align:center;box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-icon-button[_ngcontent-%COMP%]{transition:transform .1s ease-in-out}.mat-icon-button[_ngcontent-%COMP%]:hover{transform:scale(1.6)}"],changeDetection:0}),ge);function ye(e,t){if(1&e){var n=b.ac();b.Zb(0,"mat-expansion-panel",5),b.hc("opened",(function(){b.Ec(n);var e=t.$implicit;return b.lc(2).toggleMenuItem(e)}))("closed",(function(){b.Ec(n);var e=t.$implicit;return b.lc(2).toggleMenuItem(e)})),b.Zb(1,"mat-expansion-panel-header"),b.Zb(2,"mat-panel-title"),b.Ub(3,"mat-icon",6),b.Zb(4,"span",7),b.Pc(5),b.Yb(),b.Yb(),b.Yb(),b.Zb(6,"div",8),b.Zb(7,"div",9),b.Zb(8,"label",10),b.Pc(9,"Label"),b.Yb(),b.Zb(10,"input",11),b.hc("ngModelChange",(function(e){return b.Ec(n),t.$implicit.label=e}))("ngModelChange",(function(){return b.Ec(n),b.lc(2).menus.commitChanges()})),b.Yb(),b.Yb(),b.Zb(11,"div",9),b.Zb(12,"label",10),b.Pc(13,"Type"),b.Yb(),b.Zb(14,"select",12),b.hc("ngModelChange",(function(e){return b.Ec(n),t.$implicit.type=e}))("ngModelChange",(function(){return b.Ec(n),b.lc(2).menus.commitChanges()})),b.Zb(15,"option",13),b.Pc(16,"Link"),b.Yb(),b.Zb(17,"option",14),b.Pc(18,"Route"),b.Yb(),b.Zb(19,"option",15),b.Pc(20,"Page"),b.Yb(),b.Yb(),b.Yb(),b.Zb(21,"div",9),b.Zb(22,"label",10),b.Pc(23,"Action"),b.Yb(),b.Zb(24,"input",11),b.hc("ngModelChange",(function(e){return b.Ec(n),t.$implicit.action=e}))("ngModelChange",(function(){return b.Ec(n),b.lc(2).menus.commitChanges()})),b.Yb(),b.Yb(),b.Zb(25,"div",9),b.Zb(26,"label",10),b.Pc(27,"Condition"),b.Yb(),b.Zb(28,"select",12),b.hc("ngModelChange",(function(e){return b.Ec(n),t.$implicit.condition=e}))("ngModelChange",(function(){return b.Ec(n),b.lc(2).menus.commitChanges()})),b.Zb(29,"option",16),b.Pc(30,"None"),b.Yb(),b.Zb(31,"option",17),b.Pc(32,"Show to Logged in Users Only"),b.Yb(),b.Zb(33,"option",18),b.Pc(34,"Show to Guest Users Only"),b.Yb(),b.Zb(35,"option",19),b.Pc(36,"Show to Admin Only"),b.Yb(),b.Yb(),b.Yb(),b.Zb(37,"div",9),b.Zb(38,"label",10),b.Pc(39,"Open link in"),b.Yb(),b.Zb(40,"select",12),b.hc("ngModelChange",(function(e){return b.Ec(n),t.$implicit.target=e}))("ngModelChange",(function(){return b.Ec(n),b.lc(2).menus.commitChanges()})),b.Zb(41,"option",20),b.Pc(42,"Same Window"),b.Yb(),b.Zb(43,"option",21),b.Pc(44,"New Window"),b.Yb(),b.Yb(),b.Yb(),b.Zb(45,"div",22,23),b.hc("click",(function(){b.Ec(n);var e=t.$implicit,a=b.Bc(46);return b.lc(2).openIconSelector(a,e)})),b.Zb(47,"label",10),b.Pc(48,"Icon"),b.Yb(),b.Zb(49,"input",24),b.hc("ngModelChange",(function(e){return b.Ec(n),t.$implicit.icon=e})),b.Yb(),b.Ub(50,"mat-icon",25),b.Yb(),b.Yb(),b.Zb(51,"mat-action-row"),b.Zb(52,"button",26),b.hc("click",(function(){return b.Ec(n),b.lc(2).confirmMenuItemDeletion()})),b.Pc(53,"Remove"),b.Yb(),b.Yb(),b.Yb()}if(2&e){var a=t.$implicit;b.Gb("data-id",a.id),b.Fb(5),b.Qc(a.label),b.Fb(3),b.uc("for",a.id+"-label"),b.Fb(2),b.uc("id",a.id+"-label"),b.tc("ngModel",a.label),b.Fb(2),b.uc("for",a.id+"-type"),b.Fb(2),b.uc("id",a.id+"-type"),b.tc("ngModel",a.type),b.Fb(8),b.uc("for",a.id+"-action"),b.Fb(2),b.uc("id",a.id+"-action"),b.tc("ngModel",a.action),b.Fb(2),b.uc("for",a.id+"-condition"),b.Fb(2),b.uc("id",a.id+"-condition"),b.tc("ngModel",a.condition),b.Fb(1),b.tc("ngValue",null),b.Fb(9),b.uc("for",a.id+"-target"),b.Fb(2),b.uc("id",a.id+"-target"),b.tc("ngModel",a.target),b.Fb(7),b.uc("for",a.id+"-icon"),b.Fb(2),b.uc("id",a.id+"-icon"),b.tc("ngModel",a.icon),b.Fb(1),b.tc("svgIcon",a.icon)}}function ke(e,t){if(1&e){var n=b.ac();b.Zb(0,"mat-accordion",3),b.hc("cdkDropListDropped",(function(e){return b.Ec(n),b.lc().reorderMenuItems(e)})),b.Nc(1,ye,54,22,"mat-expansion-panel",4),b.Yb()}if(2&e){var a=t.ngIf;b.Fb(1),b.tc("ngForOf",a.items)}}function Ce(e,t){1&e&&(b.Zb(0,"div",27),b.Pc(1,"This menu has no items yet."),b.Yb())}var Pe,xe=((Pe=function(){function e(t,n,a,i){_classCallCheck(this,e),this.menus=t,this.modal=n,this.overlayPanel=a,this.cd=i,this.subscriptions=[]}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(e){e&&e.unsubscribe()}))}},{key:"reorderMenuItems",value:function(e){this.menus.reorderActiveMenuItems(e.previousIndex,e.currentIndex)}},{key:"toggleMenuItem",value:function(e){this.selectedMenuItem=this.selectedMenuItem===e?null:e}},{key:"confirmMenuItemDeletion",value:function(){var e=this;this.modal.show(j.a,{title:"Delete Menu Item",body:"Are you sure you want to delete this menu item?",ok:"Delete"}).afterClosed().subscribe((function(t){t&&(e.menus.removeItem(e.selectedMenuItem),e.selectedMenuItem=null)}))}},{key:"openIconSelector",value:function(e,t){var n=this;this.overlayPanel.open(ve,{position:ee.a,origin:new b.m(e)}).valueChanged().subscribe((function(e){t.icon=e,n.menus.commitChanges(),n.cd.detectChanges()}))}}]),e}()).\u0275fac=function(e){return new(e||Pe)(b.Tb(oe),b.Tb(L.a),b.Tb(he.a),b.Tb(b.i))},Pe.\u0275cmp=b.Nb({type:Pe,selectors:[["menu-items"]],decls:6,vars:4,consts:[["trans","",1,"title"],["cdkDropList","",3,"cdkDropListDropped",4,"ngIf","ngIfElse"],["noActiveMenu",""],["cdkDropList","",3,"cdkDropListDropped"],["class","mat-elevation-z menu-item-container","cdkDrag","",3,"opened","closed",4,"ngFor","ngForOf"],["cdkDrag","",1,"mat-elevation-z","menu-item-container",3,"opened","closed"],["cdkDragHandle","","svgIcon","drag-handle",1,"drag-handle"],[1,"name"],[1,"many-inputs","menu-item-list"],[1,"input-container"],["trans","",3,"for"],["type","text",3,"ngModel","id","ngModelChange"],[3,"ngModel","id","ngModelChange"],["value","link","trans",""],["value","route","trans",""],["value","page","trans",""],["trans","",3,"ngValue"],["value","auth","trans",""],["value","guest","trans",""],["value","admin","trans",""],["value","_self","trans",""],["value","_blank","trans",""],[1,"input-container","icon-input-container",3,"click"],["iconInput",""],["type","text","readonly","","placeholder","(Optional)","trans-placeholder","",3,"ngModel","id","ngModelChange"],[3,"svgIcon"],["mat-button","","color","warn","trans","",1,"delete-button",3,"click"],["trans","",1,"no-menu-items"]],template:function(e,t){if(1&e&&(b.Zb(0,"div",0),b.Pc(1,"Menu Items"),b.Yb(),b.Nc(2,ke,2,1,"mat-accordion",1),b.mc(3,"async"),b.Nc(4,Ce,2,0,"ng-template",null,2,b.Oc)),2&e){var n=b.Bc(5);b.Fb(2),b.tc("ngIf",b.nc(3,2,t.menus.activeMenu$))("ngIfElse",n)}},directives:[f.a,o.t,le.a,ne.d,o.s,le.c,ne.a,le.f,le.g,h.a,ne.b,c.c,c.t,c.w,c.F,c.y,c.I,le.d,g.b],pipes:[o.b],styles:["[_nghost-%COMP%]{display:block}.title[_ngcontent-%COMP%]{margin:35px 0 5px}.no-menu-items[_ngcontent-%COMP%]{font-size:1.6rem;font-style:italic;color:var(--be-secondary-text);margin:10px 0}.icon-input-container[_ngcontent-%COMP%]{position:relative}.icon-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:35px}.icon-input-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:absolute;top:36px;left:8px;color:var(--be-secondary-text)}.menu-item-list[_ngcontent-%COMP%]{padding-top:25px}.mat-expansion-panel[_ngcontent-%COMP%]{margin-bottom:10px;border-radius:4px;border:1px solid var(--be-divider-default)}.mat-expansion-panel-header[_ngcontent-%COMP%]{min-height:57px}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{border-bottom:1px solid var(--be-divider-default)}.mat-action-row[_ngcontent-%COMP%]{border:none;padding:0 15px 10px}.drag-handle[_ngcontent-%COMP%]{display:block;color:var(--be-secondary-text);margin-right:8px;cursor:move}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0}),Pe);function Me(e,t){if(1&e&&(b.Zb(0,"option",15),b.Pc(1),b.Yb()),2&e){var n=t.$implicit,a=b.lc(2);b.tc("ngValue",n),b.Fb(1),b.Qc(a.getDisplayName(n))}}function _e(e,t){if(1&e){var n=b.ac();b.Zb(0,"div",4),b.Zb(1,"div",5),b.Zb(2,"div",6),b.Zb(3,"label",7),b.Pc(4,"Menu Name"),b.Yb(),b.Zb(5,"input",8),b.hc("ngModelChange",(function(e){return b.Ec(n),t.ngIf.name=e}))("ngModelChange",(function(){return b.Ec(n),b.lc().menus.commitChanges()})),b.Yb(),b.Yb(),b.Zb(6,"div",6),b.Zb(7,"label",9),b.Pc(8,"Menu Position"),b.Yb(),b.Zb(9,"select",10),b.hc("ngModelChange",(function(e){return b.Ec(n),t.ngIf.position=e}))("ngModelChange",(function(){return b.Ec(n),b.lc().menus.commitChanges()})),b.Nc(10,Me,2,2,"option",11),b.Yb(),b.Yb(),b.Yb(),b.Ub(11,"menu-items"),b.Zb(12,"div",12),b.Zb(13,"button",13),b.hc("click",(function(){return b.Ec(n),b.lc().confirmMenuDeletion()})),b.Pc(14,"Delete Menu"),b.Yb(),b.Zb(15,"button",14),b.hc("click",(function(){return b.Ec(n),b.lc().openAddItemPanel()})),b.Pc(16,"Add Item"),b.Yb(),b.Yb(),b.Yb()}if(2&e){var a=t.ngIf,i=b.lc();b.Fb(5),b.tc("ngModel",a.name),b.Fb(4),b.tc("ngModel",a.position),b.Fb(1),b.tc("ngForOf",i.appearance.config.menus.positions)}}function Ye(e,t){if(1&e){var n=b.ac();b.Zb(0,"div",19),b.hc("click",(function(){b.Ec(n);var e=t.$implicit;return b.lc(2).setActiveMenu(e)})),b.Zb(1,"span",20),b.Pc(2),b.Yb(),b.Ub(3,"mat-icon",21),b.Yb()}if(2&e){var a=t.$implicit;b.Fb(2),b.Qc(a.name)}}function Ze(e,t){if(1&e){var n=b.ac();b.Zb(0,"div",16),b.Nc(1,Ye,4,1,"div",17),b.mc(2,"async"),b.Zb(3,"div",12),b.Zb(4,"button",18),b.hc("click",(function(){return b.Ec(n),b.lc().menus.create()})),b.Pc(5,"Add a Menu"),b.Yb(),b.Yb(),b.Yb()}if(2&e){var a=b.lc();b.Fb(1),b.tc("ngForOf",b.nc(2,1,a.menus.allMenus$))}}var we,Oe=function(e){return["Menus",e]},Ie=((we=function(){function e(t,n,a,i,o,c){_classCallCheck(this,e),this.appearance=t,this.menus=n,this.modal=a,this.settings=i,this.panel=o,this.el=c,this.menus.setFromJson(this.settings.get("menus"))}return _createClass(e,[{key:"openAddItemPanel",value:function(){var e=ee.a.slice();e[0].offsetX=10,e[1].offsetX=10,this.panel.open(me,{position:e,origin:this.el,panelClass:"add-menu-item-panel-container"})}},{key:"openPreviousPanel",value:function(){this.menus.activeMenu$.value?this.menus.activeMenu$.next(null):this.appearance.closeActivePanel()}},{key:"setActiveMenu",value:function(e){this.menus.activeMenu$.next(e)}},{key:"confirmMenuDeletion",value:function(){var e=this;this.modal.show(j.a,{title:"Delete Menu",body:"Are you sure you want to delete this menu?",ok:"Delete"}).afterClosed().subscribe((function(t){t&&e.menus.deleteActive()}))}},{key:"getDisplayName",value:function(e){return e.replace(/-/g," ")}}]),e}()).\u0275fac=function(e){return new(e||we)(b.Tb(d.a),b.Tb(oe),b.Tb(L.a),b.Tb(ie.a),b.Tb(he.a),b.Tb(b.m))},we.\u0275cmp=b.Nb({type:we,selectors:[["menus-appearance-panel"]],decls:6,vars:7,consts:[[3,"path","back"],[1,"appearance-panel-content"],["class","menu-panel",4,"ngIf","ngIfElse"],["allMenuList",""],[1,"menu-panel"],[1,"many-inputs","menu-settings"],[1,"input-container"],["for","menu-name","trans",""],["type","text","id","menu-name",3,"ngModel","ngModelChange"],["for","menu-position","trans",""],["id","menu-position",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"action-buttons"],["mat-button","","color","warn","trans","",3,"click"],["mat-button","","color","accent","trans","",1,"button","flat","add-item-button",3,"click"],[3,"ngValue"],[1,"menus"],["class","menu nav-item",3,"click",4,"ngFor","ngForOf"],["mat-button","","color","accent","trans","",1,"button","primary",3,"click"],[1,"menu","nav-item",3,"click"],[1,"name"],["svgIcon","keyboard-arrow-right",1,"actions"]],template:function(e,t){if(1&e&&(b.Zb(0,"appearance-panel-meta",0),b.hc("back",(function(){return t.openPreviousPanel()})),b.Yb(),b.Zb(1,"div",1),b.Nc(2,_e,17,3,"div",2),b.mc(3,"async"),b.Nc(4,Ze,6,3,"ng-template",null,3,b.Oc),b.Yb()),2&e){var n=b.Bc(5);b.tc("path",b.xc(5,Oe,t.menus.activeMenu$.value&&t.menus.activeMenu$.value.name)),b.Fb(2),b.tc("ngIf",b.nc(3,3,t.menus.activeMenu$))("ngIfElse",n)}},directives:[v.a,o.t,f.a,c.c,c.t,c.w,c.F,o.s,xe,g.b,c.y,c.I,h.a],pipes:[o.b],styles:["[_nghost-%COMP%]{display:block}.menu-settings[_ngcontent-%COMP%]{margin:10px 0}.menu-settings[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{text-transform:capitalize}.action-buttons[_ngcontent-%COMP%]{text-align:right;margin:10px 0}"],changeDetection:0}),we);function Fe(e,t){if(1&e&&(b.Xb(0),b.Zb(1,"div",3),b.Zb(2,"label",4),b.Pc(3),b.Yb(),b.Ub(4,"textarea",5),b.Yb(),b.Wb()),2&e){var n=t.$implicit;b.Fb(2),b.tc("for",n.key),b.Fb(1),b.Qc(n.name),b.Fb(1),b.tc("id",n.key)("formControlName",n.key)("placeholder",n.defaultValue)}}var Te,$e=function(){return["Seo Settings"]},Ne=((Te=function(){function e(t,n){_classCallCheck(this,e),this.editor=t,this.fb=n,this.form=this.fb.group({})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.seoFields=this.editor.defaultSettings.seo_fields,this.seoFields.forEach((function(t){e.form.addControl(t.key,e.fb.control(t.value))})),this.form.valueChanges.subscribe((function(t){e.editor.addChanges(t)}))}}]),e}()).\u0275fac=function(e){return new(e||Te)(b.Tb(d.a),b.Tb(c.g))},Te.\u0275cmp=b.Nb({type:Te,selectors:[["seo-appearance-panel"]],decls:3,vars:4,consts:[[3,"path","back"],[1,"appearance-panel-content","many-inputs",3,"formGroup"],[4,"ngFor","ngForOf"],[1,"input-container"],["trans","",3,"for"],["type","text","rows","2",3,"id","formControlName","placeholder"]],template:function(e,t){1&e&&(b.Zb(0,"appearance-panel-meta",0),b.hc("back",(function(){return t.editor.closeActivePanel()})),b.Yb(),b.Zb(1,"div",1),b.Nc(2,Fe,5,5,"ng-container",2),b.Yb()),2&e&&(b.tc("path",b.wc(3,$e)),b.Fb(1),b.tc("formGroup",t.form),b.Fb(1),b.tc("ngForOf",t.seoFields))},directives:[v.a,c.u,c.l,o.s,f.a,c.c,c.t,c.j],styles:["label[_ngcontent-%COMP%]{text-transform:capitalize}"],changeDetection:0}),Te),Ee=n("FtGj"),Se=n("5o4b"),Ae=["editor"];function De(e,t){1&e&&(b.Zb(0,"p",11),b.Pc(1,"If entering javascript, wrap it with <script><\/script> tag."),b.Yb())}var je,Le,Ue=((je=function(){function e(t,n,a){_classCallCheck(this,e),this.dialogRef=t,this.data=n,this.lazyLoader=a,this.loading$=new x.a(!1),this.syntaxInvalid$=new x.a(!1)}return _createClass(e,[{key:"ngOnInit",value:function(){this.initEditor(this.data.contents,this.data.language),this.overrideDialogCloseEvents()}},{key:"confirm",value:function(){this.close(this.editor.getValue())}},{key:"close",value:function(e){this.dialogRef.close(e)}},{key:"initEditor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"html";this.loading$.next(!0),this.lazyLoader.loadAsset("js/ace/ace.js",{type:"js"}).then((function(){t.editor=ace.edit(t.editorEl.nativeElement),t.editor.getSession().setMode("ace/mode/"+n),t.editor.setTheme("ace/theme/chrome"),t.editor.$blockScrolling=1/0,e&&t.editor.setValue(e,1),t.editor.getSession().on("changeAnnotation",(function(){var e=t.editor.getSession().getAnnotations();if(e[0]&&/doctype first/.test(e[0].text))return e.splice(0,1),void t.editor.getSession().setAnnotations(e);var n=t.editor.getSession().getAnnotations().filter((function(e){return"error"===e.type})).length>0;t.syntaxInvalid$.next(n)})),t.loading$.next(!1)}))}},{key:"overrideDialogCloseEvents",value:function(){var e=this;this.dialogRef.disableClose=!0,this.dialogRef.backdropClick().subscribe((function(){e.close()})),this.dialogRef.keydownEvents().pipe(Object(_.a)((function(e){return e.keyCode===Ee.g}))).subscribe((function(){return e.close()}))}}]),e}()).\u0275fac=function(e){return new(e||je)(b.Tb(M.h),b.Tb(M.a),b.Tb(Se.a))},je.\u0275cmp=b.Nb({type:je,selectors:[["code-editor-modal"]],viewQuery:function(e,t){var n;1&e&&b.Lc(Ae,!0),2&e&&b.Ac(n=b.ic())&&(t.editorEl=n.first)},decls:18,vars:7,consts:[[1,"modal-header"],["mat-dialog-title","","trans","",1,"modal-title"],["type","button","tabindex","-1",1,"close-button","no-style",3,"click"],["svgIcon","close"],[1,"editor-container"],["class","info","trans","",4,"ngIf"],[1,"editor"],["editor",""],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled","click"],[1,"overlay",3,"isVisible"],["trans","",1,"info"]],template:function(e,t){1&e&&(b.Zb(0,"div",0),b.Zb(1,"h2",1),b.Pc(2,"Code Editor"),b.Yb(),b.Zb(3,"button",2),b.hc("click",(function(){return t.close()})),b.Ub(4,"mat-icon",3),b.Yb(),b.Yb(),b.Zb(5,"mat-dialog-content"),b.Zb(6,"div",4),b.Nc(7,De,2,0,"p",5),b.Ub(8,"div",6,7),b.Yb(),b.Yb(),b.Zb(10,"mat-dialog-actions"),b.Zb(11,"button",8),b.hc("click",(function(){return t.close()})),b.Pc(12,"Cancel"),b.Yb(),b.Zb(13,"button",9),b.hc("click",(function(){return t.confirm()})),b.mc(14,"async"),b.Pc(15,"Update"),b.Yb(),b.Yb(),b.Ub(16,"loading-indicator",10),b.mc(17,"async")),2&e&&(b.Fb(7),b.tc("ngIf","html"===t.data.language),b.Fb(6),b.tc("disabled",b.nc(14,3,t.syntaxInvalid$)),b.Fb(3),b.tc("isVisible",b.nc(17,5,t.loading$)))},directives:[M.i,f.a,h.a,M.f,o.t,M.c,g.b,U.a],pipes:[o.b],styles:["[_nghost-%COMP%]{display:block;width:800px;max-width:100%}.modal-header[_ngcontent-%COMP%]{margin:0 0 15px}.editor[_ngcontent-%COMP%]{min-height:550px;border:1px solid var(--be-divider-default);font-size:1.4rem}.info[_ngcontent-%COMP%]{color:var(--be-secondary-text)}"],changeDetection:0}),je),Ve=function(){return["Custom Code"]},Re=((Le=function(){function e(t,n,a,i){_classCallCheck(this,e),this.editor=t,this.fb=n,this.modal=a,this.toast=i,this.form=this.fb.group({"custom-code.css":[""],"custom-code.html":[""]})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,t={};Object.keys(this.form.controls).forEach((function(n){t[n]=e.editor.currentValue(n)})),this.form.patchValue(t)}},{key:"openModal",value:function(e){var t=this,n="custom-code."+e,a=this.form.value[n]||"";this.modal.open(Ue,{contents:this.form.value[n],language:e}).afterClosed().subscribe((function(i){if(void 0!==i&&a!==i){var o=_defineProperty({},n,i);t.form.patchValue(o),t.editor.saveChanges(o).subscribe((function(){t.addCodeToPreview(e,i),t.toast.open("Custom code saved")}))}}))}},{key:"addCodeToPreview",value:function(e,t){this.editor.postMessage("css"===e?new V.f(t):new V.g(t))}}]),e}()).\u0275fac=function(e){return new(e||Le)(b.Tb(d.a),b.Tb(c.g),b.Tb(L.a),b.Tb(w.a))},Le.\u0275cmp=b.Nb({type:Le,selectors:[["custom-code-appearance-panel"]],decls:12,vars:2,consts:[[3,"path","back"],[1,"appearance-panel-content"],["type","button",1,"nav-item",3,"click"],["trans","",1,"text"],["trans","",1,"actions"],[1,"nav-item",3,"click"]],template:function(e,t){1&e&&(b.Zb(0,"appearance-panel-meta",0),b.hc("back",(function(){return t.editor.closeActivePanel()})),b.Yb(),b.Zb(1,"div",1),b.Zb(2,"button",2),b.hc("click",(function(){return t.openModal("css")})),b.Zb(3,"span",3),b.Pc(4,"Custom CSS"),b.Yb(),b.Zb(5,"span",4),b.Pc(6,"Modify"),b.Yb(),b.Yb(),b.Zb(7,"button",5),b.hc("click",(function(){return t.openModal("html")})),b.Zb(8,"span",3),b.Pc(9,"Custom HTML & Javascript"),b.Yb(),b.Zb(10,"span",4),b.Pc(11,"Modify"),b.Yb(),b.Yb(),b.Yb()),2&e&&b.tc("path",b.wc(1,Ve))},directives:[v.a,f.a],styles:[".actions[_ngcontent-%COMP%]{color:var(--be-link);font-size:1.3rem}"],changeDetection:0}),Le),Qe=["iframe"];function ze(e,t){1&e&&(b.Zb(0,"span",15),b.Pc(1,"Save"),b.Yb())}function Ge(e,t){1&e&&(b.Zb(0,"span",15),b.Pc(1,"Saved"),b.Yb())}function qe(e,t){1&e&&b.Ub(0,"general-appearance-panel")}function We(e,t){1&e&&b.Ub(0,"themes-appearance-panel")}function He(e,t){1&e&&b.Ub(0,"menus-appearance-panel")}function Be(e,t){1&e&&b.Ub(0,"seo-appearance-panel")}function Xe(e,t){1&e&&b.Ub(0,"custom-code-appearance-panel")}function Je(e,t){}function Ke(e,t){1&e&&b.Nc(0,Je,0,0,"ng-template",20),2&e&&b.tc("cdkPortalOutlet",t.ngIf)}function et(e,t){if(1&e&&(b.Xb(0),b.Nc(1,Ke,1,1,void 0,19),b.mc(2,"async"),b.Wb()),2&e){var n=b.lc(2);b.Fb(1),b.tc("ngIf",b.nc(2,1,n.panelPortal$))}}function tt(e,t){if(1&e&&(b.Xb(0),b.Xb(1,16),b.Nc(2,qe,1,0,"general-appearance-panel",17),b.Nc(3,We,1,0,"themes-appearance-panel",17),b.Nc(4,He,1,0,"menus-appearance-panel",17),b.Nc(5,Be,1,0,"seo-appearance-panel",17),b.Nc(6,Xe,1,0,"custom-code-appearance-panel",17),b.Nc(7,et,3,3,"ng-container",18),b.Wb(),b.Wb()),2&e){var n=t.ngIf;b.Fb(1),b.tc("ngSwitch",n.name),b.Fb(1),b.tc("ngSwitchCase","general"),b.Fb(1),b.tc("ngSwitchCase","themes"),b.Fb(1),b.tc("ngSwitchCase","menus"),b.Fb(1),b.tc("ngSwitchCase","seo-settings"),b.Fb(1),b.tc("ngSwitchCase","custom-code")}}var nt=function(){return[]},at=function(e){return{panel:e}};function it(e,t){if(1&e&&(b.Zb(0,"a",23),b.Zb(1,"span",24),b.Pc(2),b.Yb(),b.Ub(3,"mat-icon",25),b.Yb()),2&e){var n=t.$implicit,a=b.lc(2);b.tc("routerLink",b.wc(3,nt))("queryParams",b.xc(4,at,a.slugify(n.name))),b.Fb(2),b.Qc(a.viewName(n.name))}}function ot(e,t){if(1&e&&(b.Zb(0,"div",21),b.Nc(1,it,4,6,"a",22),b.Yb()),2&e){var n=b.lc();b.Fb(1),b.tc("ngForOf",n.editor.config.sections)}}var ct,rt,st,lt,ut,bt,dt,pt=((rt=function(){function e(t,n,a,i){_classCallCheck(this,e),this.editor=t,this.router=n,this.route=a,this.breakpoints=i,this.leftColumnIsHidden=!1,this.panelPortal$=this.editor.activePanel$.pipe(Object(u.a)((function(e){return e&&e.component?new l.d(e.component):null})))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.leftColumnIsHidden=this.breakpoints.isMobile$.value,this.editor.init(this.iframe.nativeElement,this.route.snapshot.data.defaultSettings),this.routerSub=this.route.queryParams.subscribe((function(t){e.editor.openPanel(t.panel)}))}},{key:"ngOnDestroy",value:function(){this.routerSub&&this.routerSub.unsubscribe()}},{key:"closeEditor",value:function(){this.router.navigate(["admin"])}},{key:"slugify",value:function(e){return Object(s.a)(e)}},{key:"viewName",value:function(e){return e.replace("-"," ")}},{key:"toggleLeftSidebar",value:function(){this.leftColumnIsHidden=!this.leftColumnIsHidden}}]),e}()).\u0275fac=function(e){return new(e||rt)(b.Tb(d.a),b.Tb(r.e),b.Tb(r.a),b.Tb(p.a))},rt.\u0275cmp=b.Nb({type:rt,selectors:[["appearance"]],viewQuery:function(e,t){var n;1&e&&b.Lc(Qe,!0),2&e&&b.Ac(n=b.ic())&&(t.iframe=n.first)},decls:25,vars:17,consts:[[1,"sidebar",3,"opened","mode"],[1,"header"],[1,"back-button",3,"click"],["svgIcon","close"],["trans","",1,"title"],["mat-raised-button","","color","accent",1,"button","primary","save-button",3,"disabled","click"],["trans","",4,"ngIf","ngIfElse"],["saved",""],[4,"ngIf","ngIfElse"],["navigation",""],[1,"live-preview"],["src","about:blank"],["iframe",""],["mat-fab","",1,"sidebar-toggle-button",3,"click"],["svgIcon","edit"],["trans",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngIf"],[3,"cdkPortalOutlet"],[1,"root-navigation"],["class","nav-item",3,"routerLink","queryParams",4,"ngFor","ngForOf"],[1,"nav-item",3,"routerLink","queryParams"],["trans","",1,"text"],["svgIcon","keyboard-arrow-right",1,"actions"]],template:function(e,t){if(1&e&&(b.Zb(0,"mat-sidenav-container"),b.Zb(1,"mat-sidenav",0),b.mc(2,"async"),b.Zb(3,"div",1),b.Zb(4,"div",2),b.hc("click",(function(){return t.closeEditor()})),b.Ub(5,"mat-icon",3),b.Yb(),b.Zb(6,"div",4),b.Pc(7,"Appearance Editor"),b.Yb(),b.Zb(8,"button",5),b.hc("click",(function(){return t.editor.saveChanges()})),b.mc(9,"async"),b.mc(10,"async"),b.Nc(11,ze,2,0,"span",6),b.mc(12,"async"),b.Nc(13,Ge,2,0,"ng-template",null,7,b.Oc),b.Yb(),b.Yb(),b.Nc(15,tt,8,6,"ng-container",8),b.mc(16,"async"),b.Nc(17,ot,2,1,"ng-template",null,9,b.Oc),b.Yb(),b.Zb(19,"mat-sidenav-content"),b.Zb(20,"div",10),b.Ub(21,"iframe",11,12),b.Yb(),b.Yb(),b.Yb(),b.Zb(23,"button",13),b.hc("click",(function(){return t.toggleLeftSidebar()})),b.Ub(24,"mat-icon",14),b.Yb()),2&e){var n=b.Bc(14),a=b.Bc(18);b.Fb(1),b.tc("opened",!t.leftColumnIsHidden)("mode",b.nc(2,7,t.breakpoints.isMobile$)?"over":"side"),b.Fb(7),b.tc("disabled",!b.nc(9,9,t.editor.changes$)||b.nc(10,11,t.editor.loading$)),b.Fb(3),b.tc("ngIf",b.nc(12,13,t.editor.changes$))("ngIfElse",n),b.Fb(4),b.tc("ngIf",b.nc(16,15,t.editor.activePanel$))("ngIfElse",a)}},directives:[m.b,m.a,h.a,f.a,g.b,o.t,m.c,o.x,o.y,o.z,P,K,Ie,Ne,Re,l.c,o.s,r.h],pipes:[o.b],styles:[".mat-sidenav-container[_ngcontent-%COMP%]{height:100vh}.sidebar-toggle-button[_ngcontent-%COMP%]{display:none;position:fixed;bottom:15px;right:15px;z-index:3}.sidebar[_ngcontent-%COMP%]{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);width:330px;background-color:var(--be-background-alternative)}.sidebar[_ngcontent-%COMP%]   .root-navigation[_ngcontent-%COMP%]{padding:10px}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;padding-right:10px;border-bottom:1px solid var(--be-divider-default);height:50px}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-left:10px;font-size:1.7rem;font-weight:300}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]{margin-left:auto;max-height:36px;box-shadow:none}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:disabled{cursor:default}.live-preview[_ngcontent-%COMP%]{display:flex;height:100%;justify-content:center;align-items:center;flex:1 1 auto;position:relative}.live-preview[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{border:none;width:100%;height:100%}@media screen and (max-width:768px){.sidebar-toggle-button[_ngcontent-%COMP%]{display:block}}"],changeDetection:0}),rt),mt=((ct=function(){function e(t,n){_classCallCheck(this,e),this.editor=t,this.modal=n}return _createClass(e,[{key:"canDeactivate",value:function(){return!this.editor.changes$.value||this.modal.show(j.a,{title:"Close Appearance Editor",body:"Are you sure you want to close appearance editor?",bodyBold:"All unsaved changes will be lost.",ok:"Close",cancel:"Stay"}).afterClosed()}}]),e}()).\u0275fac=function(e){return new(e||ct)(b.dc(d.a),b.dc(L.a))},ct.\u0275prov=b.Pb({token:ct,factory:ct.\u0275fac,providedIn:"root"}),ct),ht=n("0QyJ"),ft=n("JIr8"),gt=n("5+tZ"),vt=n("EY2u"),yt=n("LRne"),kt=[{path:"",component:pt,data:{permissions:["appearance.update"]},resolve:{defaultSettings:(st=function(){function e(t,n){_classCallCheck(this,e),this.router=t,this.http=n}return _createClass(e,[{key:"resolve",value:function(e,t){var n=this;return this.http.get("admin/appearance/values").pipe(Object(ft.a)((function(){return n.router.navigate(["/admin"]),vt.a})),Object(gt.a)((function(e){return e?Object(yt.a)(e):(n.router.navigate(["/admin"]),vt.a)})))}}]),e}(),st.\u0275fac=function(e){return new(e||st)(b.dc(r.e),b.dc(Y.a))},st.\u0275prov=b.Pb({token:st,factory:st.\u0275fac,providedIn:"root"}),st)},canActivate:[ht.a],canDeactivate:[mt],children:[{path:""},{path:":panel"},{path:":panel/:activeItem"}]}],Ct=((lt=function e(){_classCallCheck(this,e)}).\u0275mod=b.Rb({type:lt}),lt.\u0275inj=b.Qb({factory:function(e){return new(e||lt)},imports:[[r.i.forChild(kt)],r.i]}),lt),Pt=n("X3pI"),xt=((ut=function e(){_classCallCheck(this,e)}).\u0275mod=b.Rb({type:ut}),ut.\u0275inj=b.Qb({factory:function(e){return new(e||ut)},imports:[[o.c,Pt.a,g.c,h.b]]}),ut),Mt=n("6rvT"),_t=n("MKyN"),Yt=n("STbY"),Zt=n("bv9b"),wt=((dt=function e(){_classCallCheck(this,e)}).\u0275mod=b.Rb({type:dt}),dt.\u0275inj=b.Qb({factory:function(e){return new(e||dt)},imports:[[o.c,Mt.a,h.b]]}),dt),Ot=((bt=function e(){_classCallCheck(this,e)}).\u0275mod=b.Rb({type:bt}),bt.\u0275inj=b.Qb({factory:function(e){return new(e||bt)},imports:[[Ct,o.c,c.n,c.D,xt,Mt.a,_t.a,Pt.a,wt,Yt.b,Zt.b,h.b,g.c,M.g,le.b,ne.f,m.d,l.h,O.b]]}),bt),It=n("FKr1");n("8LU1"),n("R1ws"),n("nLfN"),n("quSY"),n("u47x"),n("cH1L");var Ft,Tt,$t=((Ft=function e(){_classCallCheck(this,e)}).\u0275mod=b.Rb({type:Ft}),Ft.\u0275inj=b.Qb({factory:function(e){return new(e||Ft)},imports:[[o.c,It.i],It.i]}),Ft),Nt=n("/1cH"),Et=((Tt=function e(){_classCallCheck(this,e)}).\u0275mod=b.Rb({type:Tt}),Tt.\u0275inj=b.Qb({factory:function(e){return new(e||Tt)},imports:[[o.c,Ot,c.D,wt,Mt.a,r.i,Pt.a,h.b,g.c,Mt.a,$t,Nt.b,ne.f]]}),Tt)}}]);
//# sourceMappingURL=9-es5.149fed4b793c853f745b.js.map